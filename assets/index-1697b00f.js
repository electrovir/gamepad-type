const uo=Object.prototype.toString;function lo(e){switch(uo.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return De(e,Error)}}function Mt(e,t){return uo.call(e)===`[object ${t}]`}function ns(e){return Mt(e,"ErrorEvent")}function qs(e){return Mt(e,"DOMError")}function Zc(e){return Mt(e,"DOMException")}function Ae(e){return Mt(e,"String")}function rs(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function ss(e){return e===null||rs(e)||typeof e!="object"&&typeof e!="function"}function Tt(e){return Mt(e,"Object")}function zn(e){return typeof Event<"u"&&De(e,Event)}function Qc(e){return typeof Element<"u"&&De(e,Element)}function eu(e){return Mt(e,"RegExp")}function tn(e){return!!(e&&e.then&&typeof e.then=="function")}function tu(e){return Tt(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function fo(e){return typeof e=="number"&&e!==e}function De(e,t){try{return e instanceof t}catch{return!1}}function ho(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function St(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Gs(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{ho(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function nu(e,t,n=!1){return Ae(e)?eu(t)?t.test(e):Ae(t)?n?e===t:e.includes(t):!1:!1}function At(e,t=[],n=!1){return t.some(r=>nu(e,r,n))}function po(e,t,n=250,r,s,i,o){if(!i.exception||!i.exception.values||!o||!De(o.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=ru(Tr(e,t,s,o.originalException,r,i.exception.values,a,0),n))}function Tr(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(De(r[s],Error)){Ys(o,a);const u=e(t,r[s]),d=c.length;Vs(u,s,d,a),c=Tr(e,t,n,r[s],s,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(De(u,Error)){Ys(o,a);const l=e(t,u),f=c.length;Vs(l,`errors[${d}]`,f,a),c=Tr(e,t,n,u,s,[l,...c],l,f)}}),c}function Ys(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function Vs(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function ru(e,t){return e.map(n=>(n.value&&(n.value=St(n.value,t)),n))}function hn(e){return e&&e.Math==Math?e:void 0}const A=typeof globalThis=="object"&&hn(globalThis)||typeof window=="object"&&hn(window)||typeof self=="object"&&hn(self)||typeof global=="object"&&hn(global)||function(){return this}()||{};function is(){return A}function mo(e,t,n){const r=n||A,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const bt=is(),su=80;function Ze(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||su;for(;n&&i++<r&&(u=iu(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function iu(e,t){const n=e,r=[];let s,i,o,a,c;if(!n||!n.tagName)return"";if(bt.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(l=>n.getAttribute(l)).map(l=>[l,n.getAttribute(l)]):null;if(u&&u.length)u.forEach(l=>{r.push(`[${l[0]}="${l[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&Ae(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)o=d[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function go(){try{return bt.document.location.href}catch{return""}}function ou(e){return bt.document&&bt.document.querySelector?bt.document.querySelector(e):null}function _o(e){if(!bt.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Ot=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,au="Sentry Logger ",wr=["debug","info","warn","error","log","assert","trace"],xn={};function Qe(e){if(!("console"in A))return e();const t=A.console,n={},r=Object.keys(xn);r.forEach(s=>{const i=xn[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function cu(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Ot?wr.forEach(n=>{t[n]=(...r)=>{e&&Qe(()=>{A.console[n](`${au}[${n}]:`,...r)})}}):wr.forEach(n=>{t[n]=()=>{}}),t}const p=cu(),uu=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function lu(e){return e==="http"||e==="https"}function Nt(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function yo(e){const t=uu.exec(e);if(!t){Qe(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",i,o="",a]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return So({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function So(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function du(e){if(!Ot)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(p.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?lu(r)?t&&isNaN(parseInt(t,10))?(p.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(p.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(p.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function bo(e){const t=typeof e=="string"?yo(e):So(e);if(!(!t||!du(t)))return t}class Ce extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function se(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);typeof s=="function"&&Eo(s,r),e[t]=s}function Yt(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Ot&&p.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Eo(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Yt(e,"__sentry_original__",t)}catch{}}function os(e){return e.__sentry_original__}function fu(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function vo(e){if(lo(e))return{message:e.message,name:e.name,stack:e.stack,...Xs(e)};if(zn(e)){const t={type:e.type,target:Ks(e.target),currentTarget:Ks(e.currentTarget),...Xs(e)};return typeof CustomEvent<"u"&&De(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Ks(e){try{return Qc(e)?Ze(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Xs(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function hu(e,t=40){const n=Object.keys(vo(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return St(n[0],t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:St(s,t)}return""}function me(e){return kr(e,new Map)}function kr(e,t){if(Tt(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.keys(e))typeof e[s]<"u"&&(r[s]=kr(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(kr(s,t))}),r}return e}const To=50,Js=/\(error: (.*)\)/,Zs=/captureMessage|captureException/;function wo(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[],i=n.split(`
`);for(let o=r;o<i.length;o++){const a=i[o];if(a.length>1024)continue;const c=Js.test(a)?a.replace(Js,"$1"):a;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=To)break}}return mu(s)}}function pu(e){return Array.isArray(e)?wo(...e):e}function mu(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Zs.test(t[t.length-1].function||"")&&(t.pop(),Zs.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,To).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const cr="<anonymous>";function Le(e){try{return!e||typeof e!="function"?cr:e.name||cr}catch{return cr}}const kn={},Qs={};function nt(e,t){kn[e]=kn[e]||[],kn[e].push(t)}function rt(e,t){Qs[e]||(t(),Qs[e]=!0)}function Ee(e,t){const n=e&&kn[e];if(n)for(const r of n)try{r(t)}catch(s){Ot&&p.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Le(r)}
Error:`,s)}}function gu(e){const t="console";nt(t,e),rt(t,_u)}function _u(){"console"in A&&wr.forEach(function(e){e in A.console&&se(A.console,e,function(t){return xn[e]=t,function(...n){Ee("console",{args:n,level:e});const s=xn[e];s&&s.apply(A.console,n)}})})}function Q(){const e=A,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function ko(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function He(e){const{message:t,event_id:n}=e;if(t)return t;const r=ko(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ir(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Vt(e,t){const n=ko(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s&&s.data,...t.data};n.mechanism.data=i}}function ei(e){if(e&&e.__sentry_captured__)return!0;try{Yt(e,"__sentry_captured__",!0)}catch{}return!1}function Io(e){return Array.isArray(e)?e:[e]}const dt=A,yu=1e3;let ti,Rr,Cr;function Ro(e){const t="dom";nt(t,e),rt(t,Su)}function Su(){if(!dt.document)return;const e=Ee.bind(null,"dom"),t=ni(e,!0);dt.document.addEventListener("click",t,!1),dt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=dt[n]&&dt[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(se(r,"addEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},d=u[i]=u[i]||{refCount:0};if(!d.handler){const l=ni(e);d.handler=l,s.call(this,i,l,a)}d.refCount++}catch{}return s.call(this,i,o,a)}}),se(r,"removeEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},d=u[i];d&&(d.refCount--,d.refCount<=0&&(s.call(this,i,d.handler,a),d.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,o,a)}}))})}function bu(e){if(e.type!==Rr)return!1;try{if(!e.target||e.target._sentryId!==Cr)return!1}catch{}return!0}function Eu(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function ni(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=vu(n);if(Eu(n.type,r))return;Yt(n,"_sentryCaptured",!0),r&&!r._sentryId&&Yt(r,"_sentryId",Q());const s=n.type==="keypress"?"input":n.type;bu(n)||(e({event:n,name:s,global:t}),Rr=n.type,Cr=r?r._sentryId:void 0),clearTimeout(ti),ti=dt.setTimeout(()=>{Cr=void 0,Rr=void 0},yu)}}function vu(e){try{return e.target}catch{return null}}const xr=is();function Co(){if(!("fetch"in xr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Mr(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Tu(){if(typeof EdgeRuntime=="string")return!0;if(!Co())return!1;if(Mr(xr.fetch))return!0;let e=!1;const t=xr.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Mr(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Ot&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function as(e){const t="fetch";nt(t,e),rt(t,wu)}function wu(){Tu()&&se(A,"fetch",function(e){return function(...t){const{method:n,url:r}=ku(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Ee("fetch",{...s}),e.apply(A,t).then(i=>{const o={...s,endTimestamp:Date.now(),response:i};return Ee("fetch",o),i},i=>{const o={...s,endTimestamp:Date.now(),error:i};throw Ee("fetch",o),i})}})}function Ar(e,t){return!!e&&typeof e=="object"&&!!e[t]}function ri(e){return typeof e=="string"?e:e?Ar(e,"url")?e.url:e.toString?e.toString():"":""}function ku(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:ri(n),method:Ar(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:ri(t),method:Ar(t,"method")?String(t.method).toUpperCase():"GET"}}let pn=null;function xo(e){const t="error";nt(t,e),rt(t,Iu)}function Iu(){pn=A.onerror,A.onerror=function(e,t,n,r,s){return Ee("error",{column:r,error:s,line:n,msg:e,url:t}),pn&&!pn.__SENTRY_LOADER__?pn.apply(this,arguments):!1},A.onerror.__SENTRY_INSTRUMENTED__=!0}let mn=null;function Mo(e){const t="unhandledrejection";nt(t,e),rt(t,Ru)}function Ru(){mn=A.onunhandledrejection,A.onunhandledrejection=function(e){return Ee("unhandledrejection",e),mn&&!mn.__SENTRY_LOADER__?mn.apply(this,arguments):!0},A.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const gn=is();function Cu(){const e=gn.chrome,t=e&&e.app&&e.app.runtime,n="history"in gn&&!!gn.history.pushState&&!!gn.history.replaceState;return!t&&n}const $t=A;let _n;function Wn(e){const t="history";nt(t,e),rt(t,xu)}function xu(){if(!Cu())return;const e=$t.onpopstate;$t.onpopstate=function(...n){const r=$t.location.href,s=_n;if(_n=r,Ee("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=_n,o=String(s);_n=o,Ee("history",{from:i,to:o})}return n.apply(this,r)}}se($t.history,"pushState",t),se($t.history,"replaceState",t)}const Mu=A,Ue="__sentry_xhr_v3__";function cs(e){const t="xhr";nt(t,e),rt(t,Au)}function Au(){if(!Mu.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;se(e,"open",function(t){return function(...n){const r=Date.now(),s=Ae(n[0])?n[0].toUpperCase():void 0,i=Ou(n[1]);if(!s||!i)return t.apply(this,n);this[Ue]={method:s,url:i,request_headers:{}},s==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[Ue];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const c={args:[s,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Ee("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?se(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),se(this,"setRequestHeader",function(a){return function(...c){const[u,d]=c,l=this[Ue];return l&&Ae(u)&&Ae(d)&&(l.request_headers[u.toLowerCase()]=d),a.apply(this,c)}}),t.apply(this,n)}}),se(e,"send",function(t){return function(...n){const r=this[Ue];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const s={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Ee("xhr",s),t.apply(this,n)}})}function Ou(e){if(Ae(e))return e;try{return e.toString()}catch{}}function Nu(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Du(){return"npm"}function Lu(){return!Nu()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Or(){return typeof window<"u"&&(!Lu()||Pu())}function Pu(){return A.process!==void 0&&A.process.type==="renderer"}function Fu(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(s){if(e)return t.has(s)?!0:(t.add(s),!1);for(let i=0;i<t.length;i++)if(t[i]===s)return!0;return t.push(s),!1}function r(s){if(e)t.delete(s);else for(let i=0;i<t.length;i++)if(t[i]===s){t.splice(i,1);break}}return[n,r]}function Ie(e,t=100,n=1/0){try{return Nr("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ao(e,t=3,n=100*1024){const r=Ie(e,t);return Uu(r)>n?Ao(e,t-1,n):r}function Nr(e,t,n=1/0,r=1/0,s=Fu()){const[i,o]=s;if(t==null||["number","boolean","string"].includes(typeof t)&&!fo(t))return t;const a=$u(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const h=u.toJSON();return Nr("",h,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=vo(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(l>=r){d[h]="[MaxProperties ~]";break}const m=f[h];d[h]=Nr(h,m,c-1,r,s),l++}return o(t),d}function $u(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ho(t))return"[VueViewModel]";if(tu(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Le(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Bu(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Bu(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function Hu(e){return~-encodeURI(e).split(/%..|./).length}function Uu(e){return Hu(JSON.stringify(e))}var Ne;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Ne||(Ne={}));function wt(e){return new fe(t=>{t(e)})}function us(e){return new fe((t,n)=>{n(e)})}class fe{constructor(t){fe.prototype.__init.call(this),fe.prototype.__init2.call(this),fe.prototype.__init3.call(this),fe.prototype.__init4.call(this),this._state=Ne.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new fe((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new fe((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(Ne.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Ne.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Ne.PENDING){if(tn(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Ne.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ne.RESOLVED&&n[1](this._value),this._state===Ne.REJECTED&&n[2](this._value),n[0]=!0)})}}}function ju(e){const t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]}function s(o){if(!n())return us(new Ce("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new fe((a,c)=>{let u=t.length;if(!u)return a(!0);const d=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(l=>{wt(l).then(()=>{--u||(clearTimeout(d),a(!0))},c)})})}return{$:t,add:s,drain:i}}function ur(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const zu=["fatal","error","warning","log","info","debug"];function Wu(e){return e==="warn"?"warning":zu.includes(e)?e:"log"}const Oo=1e3;function nn(){return Date.now()/Oo}function qu(){const{performance:e}=A;if(!e||!e.now)return nn;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/Oo}const st=qu(),pe=(()=>{const{performance:e}=A;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=e.timing&&e.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,u=c<t;return i||u?s<=c?e.timeOrigin:o:r})(),Dr="baggage",No="sentry-",Gu=/^sentry-/,Yu=8192;function Vu(e){if(!Ae(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,s)=>{const i=si(s);for(const o of Object.keys(i))r[o]=i[o];return r},{});else{if(!e)return;t=si(e)}const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(Gu)){const o=s.slice(No.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Lr(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${No}${r}`]=s),n),{});return Ku(t)}function si(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function Ku(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${t},${i}`;return o.length>Yu?(Ot&&p.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const Xu=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Do(e){if(!e)return;const t=e.match(Xu);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Lo(e,t){const n=Do(e),r=Vu(t),{traceId:s,parentSpanId:i,parentSampled:o}=n||{},a={traceId:s||Q(),spanId:Q().substring(16),sampled:o};return i&&(a.parentSpanId=i),r&&(a.dsc=r),{traceparentData:n,dynamicSamplingContext:r,propagationContext:a}}function ls(e=Q(),t=Q().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function it(e,t=[]){return[e,t]}function Ju(e,t){const[n,r]=e;return[n,[...r,t]]}function kt(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function Zu(e,t){return kt(e,(n,r)=>t.includes(r))}function Pr(e,t){return(t||new TextEncoder).encode(e)}function Po(e,t){const[n,r]=e;let s=JSON.stringify(n);function i(o){typeof s=="string"?s=typeof o=="string"?s+o:[Pr(s,t),o]:s.push(typeof o=="string"?Pr(o,t):o)}for(const o of r){const[a,c]=o;if(i(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let u;try{u=JSON.stringify(c)}catch{u=JSON.stringify(Ie(c))}i(u)}}return typeof s=="string"?s:Qu(s)}function Qu(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function el(e,t,n){let r=typeof e=="string"?t.encode(e):e;function s(c){const u=r.subarray(0,c);return r=r.subarray(c+1),u}function i(){let c=r.indexOf(10);return c<0&&(c=r.length),JSON.parse(n.decode(s(c)))}const o=i(),a=[];for(;r.length;){const c=i(),u=typeof c.length=="number"?c.length:void 0;a.push([c,u?s(u):i()])}return[o,a]}function tl(e,t){const n=typeof e.data=="string"?Pr(e.data,t):e.data;return[me({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const nl={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function ii(e){return nl[e]}function ds(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Fo(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Nt(r)},...s&&{trace:me({...s})}}}function rl(e,t,n){const r=[{type:"client_report"},{timestamp:n||nn(),discarded_events:e}];return it(t?{dsn:t}:{},[r])}const sl=60*1e3;function $o(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?sl:r-t}function il(e,t){return e[t]||e.all||0}function Bo(e,t,n=Date.now()){return il(e,t)>n}function Ho(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u]=a.split(":",2),d=parseInt(c,10),l=(isNaN(d)?60:d)*1e3;if(!u)s.all=r+l;else for(const f of u.split(";"))s[f]=r+l}else o?s.all=r+$o(o,r):t===429&&(s.all=r+60*1e3);return s}function ol(e,t){return e(t.stack||"",1)}function al(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=ol(e,t);return r.length&&(n.stacktrace={frames:r}),n}function cl(e,t){return e??t()}function lr(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}const v=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,rn="production";function fs(){return mo("globalEventProcessors",()=>[])}function ul(e){fs().push(e)}function Mn(e,t,n,r=0){return new fe((s,i)=>{const o=e[r];if(t===null||typeof o!="function")s(t);else{const a=o({...t},n);v&&o.id&&a===null&&p.log(`Event processor "${o.id}" dropped event`),tn(a)?a.then(c=>Mn(e,c,n,r+1).then(s)).then(null,i):Mn(e,a,n,r+1).then(s).then(null,i)}})}function Uo(e){const t=st(),n={sid:Q(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>ll(n)};return e&&et(n,e),n}function et(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||st(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Q()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function jo(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),et(e,n)}function ll(e){return me({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const dl=0,zo=1;function hs(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,tags:a,origin:c}=ce(e);return me({data:r,op:s,parent_span_id:i,span_id:t,status:o,tags:a,trace_id:n,origin:c})}function qn(e){const{traceId:t,spanId:n}=e.spanContext(),r=ps(e);return ls(t,n,r)}function Gn(e){return typeof e=="number"?oi(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?oi(e.getTime()):st()}function oi(e){return e>9999999999?e/1e3:e}function ce(e){return fl(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function fl(e){return typeof e.getSpanJSON=="function"}function ps(e){const{traceFlags:t}=e.spanContext();return!!(t&zo)}function ms(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Q(),timestamp:t.timestamp||nn()},u=n.integrations||e.integrations.map(_=>_.name);hl(c,e),gl(c,u),t.type===void 0&&pl(c,e.stackParser);const d=yl(r,n.captureContext);n.mechanism&&Vt(c,n.mechanism);const l=s&&s.getEventProcessors?s.getEventProcessors():[],f=Ml().getScopeData();if(i){const _=i.getScopeData();li(f,_)}if(d){const _=d.getScopeData();li(f,_)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),Yo(c,f);const m=[...l,...fs(),...f.eventProcessors];return Mn(m,c,n).then(_=>(_&&ml(_),typeof o=="number"&&o>0?_l(_,o,a):_))}function hl(e,t){const{environment:n,release:r,dist:s,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:rn),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&s!==void 0&&(e.dist=s),e.message&&(e.message=St(e.message,i));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=St(o.value,i));const a=e.request;a&&a.url&&(a.url=St(a.url,i))}const ai=new WeakMap;function pl(e,t){const n=A._sentryDebugIds;if(!n)return;let r;const s=ai.get(t);s?r=s:(r=new Map,ai.set(t,r));const i=Object.keys(n).reduce((o,a)=>{let c;const u=r.get(a);u?c=u:(c=t(a),r.set(a,c));for(let d=c.length-1;d>=0;d--){const l=c[d];if(l.filename){o[l.filename]=n[a];break}}return o},{});try{e.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function ml(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function gl(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function _l(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Ie(s.data,t,n)}}))},...e.user&&{user:Ie(e.user,t,n)},...e.contexts&&{contexts:Ie(e.contexts,t,n)},...e.extra&&{extra:Ie(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ie(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>{const i=ce(s).data;return i&&(s.data=Ie(i,t,n)),s})),r}function yl(e,t){if(!t)return e;const n=e?e.clone():new xe;return n.update(t),n}function Sl(e){if(e)return bl(e)?{captureContext:e}:vl(e)?{captureContext:e}:e}function bl(e){return e instanceof xe||typeof e=="function"}const El=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function vl(e){return Object.keys(e).some(t=>El.includes(t))}function gs(e,t){return B().captureException(e,Sl(t))}function My(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return B().captureMessage(e,n,r)}function Wo(e,t){return B().captureEvent(e,t)}function Ay(e){B().configureScope(e)}function We(e,t){B().addBreadcrumb(e,t)}function Tl(e,t){B().setContext(e,t)}function Oy(e){B().setExtras(e)}function Ny(e,t){B().setExtra(e,t)}function Dy(e){B().setTags(e)}function Ly(e,t){B().setTag(e,t)}function Py(e){B().setUser(e)}function Yn(...e){if(e.length===2){const[t,n]=e;if(!t)return B().withScope(n);const r=B();return r.withScope(()=>(r.getStackTop().scope=t,n(t)))}return B().withScope(e[0])}function Fy(e,t){return B().startTransaction({...e},t)}async function $y(e){const t=F();return t?t.flush(e):(v&&p.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function By(e){const t=F();return t?t.close(e):(v&&p.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Hy(){return B().lastEventId()}function F(){return B().getClient()}function ue(){return B().getScope()}function ci(e){const t=F(),n=Dt(),r=ue(),{release:s,environment:i=rn}=t&&t.getOptions()||{},{userAgent:o}=A.navigator||{},a=Uo({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession();return c&&c.status==="ok"&&et(c,{status:"exited"}),qo(),n.setSession(a),r.setSession(a),a}function qo(){const e=Dt(),t=ue(),n=e.getSession();n&&jo(n),Go(),e.setSession(),t.setSession()}function Go(){const e=Dt(),t=ue(),n=F(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function ui(e=!1){if(e){qo();return}Go()}function Vn(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=me({environment:r.environment||rn,release:r.release,user_segment:i,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function Kt(e){const t=F();if(!t)return{};const n=Vn(ce(e).trace_id||"",t,ue()),r=e.transaction;if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:o}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const a=ce(r);return o&&o!=="url"&&(n.transaction=a.description),n.sampled=String(ps(r)),t.emit&&t.emit("createDsc",n),n}function Yo(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i,propagationContext:o}=t;wl(e,t),r&&Rl(e,r),Cl(e,n),kl(e,s),Il(e,i,o)}function li(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:h,span:m}=t;Bt(e,"extra",n),Bt(e,"tags",r),Bt(e,"user",s),Bt(e,"contexts",i),Bt(e,"sdkProcessingMetadata",a),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function Bt(e,t,n){n&&Object.keys(n).length&&(e[t]={...e[t],...n})}function wl(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;n&&Object.keys(n).length&&(e.extra={...n,...e.extra}),r&&Object.keys(r).length&&(e.tags={...r,...e.tags}),s&&Object.keys(s).length&&(e.user={...s,...e.user}),i&&Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&(e.transaction=a)}function kl(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Il(e,t,n){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t,propagationContext:n}}function Rl(e,t){e.contexts={trace:hs(t),...e.contexts};const n=t.transaction;if(n){e.sdkProcessingMetadata={dynamicSamplingContext:Kt(t),...e.sdkProcessingMetadata};const r=ce(n).description;r&&(e.tags={transaction:r,...e.tags})}}function Cl(e,t){e.fingerprint=e.fingerprint?Io(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const xl=100;let dr;class xe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=di()}static clone(t){return t?t.clone():new xe}clone(){const t=new xe;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&et(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof xe?n:this}return t instanceof xe?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):Tt(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=di(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:xl;if(r<=0)return this;const s={timestamp:nn(),...t},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:s,_extra:i,_user:o,_level:a,_fingerprint:c,_eventProcessors:u,_propagationContext:d,_sdkProcessingMetadata:l,_transactionName:f,_span:h}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:s,extra:i,user:o,level:a,fingerprint:c||[],eventProcessors:u,propagationContext:d,sdkProcessingMetadata:l,transactionName:f,span:h}}applyToEvent(t,n={},r=[]){Yo(t,this.getScopeData());const s=[...r,...fs(),...this._eventProcessors];return Mn(s,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:Q();if(!this._client)return p.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r&&r.event_id?r.event_id:Q();if(!this._client)return p.warn("No client configured on scope - will not capture message!"),s;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:Q();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(p.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Ml(){return dr||(dr=new xe),dr}function di(){return{traceId:Q(),spanId:Q().substring(16)}}const Fr="7.93.0",Vo=parseFloat(Fr),Al=100;class Ko{constructor(t,n,r,s=Vo){this._version=s;let i;n?i=n:(i=new xe,i.setClient(t));let o;r?o=r:(o=new xe,o.setClient(t)),this._stack=[{scope:i}],t&&this.bindClient(t),this._isolationScope=o}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(s){throw this.popScope(),s}return tn(r)?r.then(s=>(this.popScope(),s),s=>{throw this.popScope(),s}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Q(),s=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:s,...n,event_id:r}),r}captureMessage(t,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:Q(),i=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s}),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:Q();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Al}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const c={timestamp:nn(),...t},u=i?Qe(()=>i(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=fi(this);try{t(this)}finally{fi(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return v&&p.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return v&&!r&&(this.getClient()?p.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):p.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&jo(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=rn}=r&&r.getOptions()||{},{userAgent:o}=A.navigator||{},a=Uo({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&et(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(t){const{scope:n,client:r}=this.getStackTop();r&&t(r,n)}_callExtensionMethod(t,...n){const s=sn().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);v&&p.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function sn(){return A.__SENTRY__=A.__SENTRY__||{extensions:{},hub:void 0},A}function fi(e){const t=sn(),n=$r(t);return Xo(t,e),n}function B(){const e=sn();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return Ol(e)}function Dt(){return B().getIsolationScope()}function Ol(e=sn()){return(!Nl(e)||$r(e).isOlderThan(Vo))&&Xo(e,new Ko),$r(e)}function Nl(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function $r(e){return mo("hub",()=>new Ko,e)}function Xo(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function Lt(e){return(e||B()).getScope().getTransaction()}const Uy=Do;let hi=!1;function Dl(){hi||(hi=!0,xo(Br),Mo(Br))}function Br(){const e=Lt();if(e){const t="internal_error";v&&p.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}Br.tag="sentry_tracingErrorCallback";class Jo{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class _s{constructor(t={}){this._traceId=t.traceId||Q(),this._spanId=t.spanId||Q().substring(16),this.startTimestamp=t.startTimestamp||st(),this.tags=t.tags?{...t.tags}:{},this.data=t.data?{...t.data}:{},this._attributes=t.attributes?{...t.attributes}:{},this.instrumenter=t.instrumenter||"sentry",this.origin=t.origin||"manual",this._name=t.name||t.description,t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.op&&(this.op=t.op),t.status&&(this.status=t.status),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}get name(){return this._name||""}set name(t){this.updateName(t)}get description(){return this._name}set description(t){this._name=t}get traceId(){return this._traceId}set traceId(t){this._traceId=t}get spanId(){return this._spanId}set spanId(t){this._spanId=t}get sampled(){return this._sampled}set sampled(t){this._sampled=t}get attributes(){return this._attributes}set attributes(t){this._attributes=t}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?zo:dl}}startChild(t){const n=new _s({...t,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,v&&n.transaction){const r=t&&t.op||"< unknown op >",s=ce(n).description||"< unknown name >",i=n.transaction.spanContext().spanId,o=`[Tracing] Starting '${r}' span on transaction '${s}' (${i}).`;p.log(o),this._logMessage=o}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setAttribute(t,n){n===void 0?delete this._attributes[t]:this._attributes[t]=n}setAttributes(t){Object.keys(t).forEach(n=>this.setAttribute(n,t[n]))}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t)),this.setData("http.response.status_code",t);const n=Ll(t);return n!=="unknown_error"&&this.setStatus(n),this}setName(t){this.updateName(t)}updateName(t){return this._name=t,this}isSuccess(){return this.status==="ok"}finish(t){return this.end(t)}end(t){if(v&&this.transaction&&this.transaction.spanContext().spanId!==this._spanId){const n=this._logMessage;n&&p.log(n.replace("Starting","Finishing"))}this.endTimestamp=Gn(t)}toTraceparent(){return qn(this)}toContext(){return me({data:this._getData(),description:this._name,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this._traceId})}updateWithContext(t){return this.data=t.data||{},this._name=t.name||t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this._sampled=t.sampled,this._spanId=t.spanId||this._spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this._traceId=t.traceId||this._traceId,this}getTraceContext(){return hs(this)}getSpanJSON(){return me({data:this._getData(),description:this._name,op:this.op,parent_span_id:this.parentSpanId,span_id:this._spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this._traceId,origin:this.origin})}isRecording(){return!this.endTimestamp&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:t,_attributes:n}=this,r=Object.keys(t).length>0,s=Object.keys(n).length>0;if(!(!r&&!s))return r&&s?{...t,...n}:r?t:n}}function Ll(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}const Et="sentry.source",pt="sentry.sample_rate";class Zo extends _s{constructor(t,n){super(t),this._measurements={},this._contexts={},this._hub=n||B(),this._name=t.name||"",this._metadata={...t.metadata},this._trimEnd=t.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Et]&&{source:this._attributes[Et]},...this._attributes[pt]&&{sampleRate:this._attributes[pt]}}}set metadata(t){this._metadata=t}setName(t,n="custom"){this._name=t,this.setAttribute(Et,n)}updateName(t){return this._name=t,this}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new Jo(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this._metadata={...this._metadata,...t}}end(t){const n=Gn(t),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return me({...t,name:this._name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this._name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){return Kt(this)}setHub(t){this._hub=t}_finishTransaction(t){if(this.endTimestamp!==void 0)return;this._name||(v&&p.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){v&&p.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(c=>c!==this&&c.endTimestamp):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((c,u)=>c.endTimestamp&&u.endTimestamp?c.endTimestamp>u.endTimestamp?c:u:c).endTimestamp);const{metadata:s}=this,{source:i}=s,o={contexts:{...this._contexts,trace:hs(this)},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...s,dynamicSamplingContext:Kt(this)},...i&&{transaction_info:{source:i}}};return Object.keys(this._measurements).length>0&&(v&&p.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),v&&p.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),o}}const In={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Pl="finishReason",ct=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Fl extends Jo{constructor(t,n,r,s){super(s),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanContext().spanId!==this.transactionSpanId){const n=t.end;t.end=(...r)=>(this._popActivity(t.spanContext().spanId),n.apply(t,r)),t.endTimestamp===void 0&&this._pushActivity(t.spanContext().spanId)}super.add(t)}}class $l extends Zo{constructor(t,n,r=In.idleTimeout,s=In.finalTimeout,i=In.heartbeatInterval,o=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=ct[4],o&&(v&&p.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=ct[3],this.end())},this._finalTimeout)}end(t){const n=Gn(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(Pl,this._finishReason),this.spanRecorder){v&&p.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;r.endTimestamp||(r.endTimestamp=n,r.setStatus("cancelled"),v&&p.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const s=r.startTimestamp<n,i=(this._finalTimeout+this._idleTimeout)/1e3,o=r.endTimestamp-this.startTimestamp<i;if(v){const a=JSON.stringify(r,void 0,2);s?o||p.log("[Tracing] discarding Span since it finished after Transaction final timeout",a):p.log("[Tracing] discarding Span since it happened after Transaction was finished",a)}return s&&o}),v&&p.log("[Tracing] flushing IdleTransaction")}else v&&p.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},r=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new Fl(n,r,this.spanContext().spanId,t),v&&p.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=ct[5],this.end(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=ct[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),v&&p.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,v&&p.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(v&&p.log(`[Tracing] popActivity ${t}`),delete this.activities[t],v&&p.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=st();this._idleTimeoutCanceledPermanently?(this._finishReason=ct[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(v&&p.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=ct[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){v&&p.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function on(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=F(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Qo(e,t,n){if(!on(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setAttribute(pt,Number(e.sampled)),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setAttribute(pt,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setAttribute(pt,Number(r))):(r=1,e.setAttribute(pt,r)),Bl(r)?r?(e.sampled=Math.random()<r,e.sampled?(v&&p.log(`[Tracing] starting ${e.op} transaction - ${ce(e).description}`),e):(v&&p.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(v&&p.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(v&&p.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Bl(e){return fo(e)||!(typeof e=="number"||typeof e=="boolean")?(v&&p.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(v&&p.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function Hl(){const t=this.getScope().getSpan();return t?{"sentry-trace":qn(t)}:{}}function Ul(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",i=e.instrumenter||"sentry";s!==i&&(v&&p.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let o=new Zo(e,this);return o=Qo(o,r,{parentSampled:e.parentSampled,transactionContext:e,...t}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function pi(e,t,n,r,s,i,o){const a=e.getClient(),c=a&&a.getOptions()||{};let u=new $l(t,e,n,r,o,s);return u=Qo(u,c,{parentSampled:t.parentSampled,transactionContext:t,...i}),u.isRecording()&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",u),u}function jl(){const e=sn();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Ul),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Hl),Dl())}function ys(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return zl(r,t,n)}function zl(e,t,n){return tn(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function jy(e,t,n=()=>{},r=()=>{}){const s=B(),i=ue(),o=i.getSpan(),a=Kn(e),c=bs(s,o,a);return i.setSpan(c),ys(()=>t(c),u=>{c&&c.setStatus("internal_error"),n(u,c)},()=>{c&&c.end(),i.setSpan(o),r()})}function zy(e,t){const n=Kn(e);return Yn(e.scope,r=>{const s=B(),i=r.getSpan(),o=bs(s,i,n);return r.setSpan(o),ys(()=>t(o),()=>{o&&(!o.status||o.status==="ok")&&o.setStatus("internal_error")},()=>o&&o.end())})}function Wy(e,t){const n=Kn(e);return Yn(e.scope,r=>{const s=B(),i=r.getSpan(),o=bs(s,i,n);r.setSpan(o);function a(){o&&o.end()}return ys(()=>t(o,a),()=>{o&&!o.endTimestamp&&(!o.status||o.status==="ok")&&o.setStatus("internal_error")})})}function qy(e){if(!on())return;const t=Kn(e),n=B(),r=e.scope?e.scope.getSpan():Ss();return r?r.startChild(t):n.startTransaction(t)}function Ss(){return ue().getSpan()}function Gy({sentryTrace:e,baggage:t},n){const r=ue(),{traceparentData:s,dynamicSamplingContext:i,propagationContext:o}=Lo(e,t);r.setPropagationContext(o),v&&s&&p.log(`[Tracing] Continuing trace ${s.traceId}.`);const a={...s,metadata:me({dynamicSamplingContext:s&&!i?{}:i})};return n?n(a):a}function bs(e,t,n){if(on())return t?t.startChild(n):e.startTransaction(n)}function Kn(e){if(e.startTime){const t={...e};return t.startTimestamp=Gn(e.startTime),delete t.startTime,t}return e}function Yy(e,t,n){const r=Lt();r&&r.setMeasurement(e,t,n)}function Wl(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function ql(e,t,n,r){const s=ds(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Nt(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return it(i,[o])}function ea(e,t,n,r){const s=ds(n),i=e.type&&e.type!=="replay_event"?e.type:"event";Wl(e,n&&n.sdk);const o=Fo(e,s,r,t);return delete e.sdkProcessingMetadata,it(o,[[{type:i},e]])}const Gl="7";function ta(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Yl(e){return`${ta(e)}${e.projectId}/envelope/`}function Vl(e,t){return fu({sentry_key:e.publicKey,sentry_version:Gl,...t&&{sentry_client:`${t.name}/${t.version}`}})}function na(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${Yl(e)}?${Vl(e,r)}`}function Kl(e,t){const n=bo(e);if(!n)return"";const r=`${ta(n)}embed/error-page/`;let s=`dsn=${Nt(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${s}`}const mi=[];function Xl(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function Jl(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Io(n(t)):r=t;const s=Xl(r),i=Ql(s,o=>o.name==="Debug");if(i!==-1){const[o]=s.splice(i,1);s.push(o)}return s}function Zl(e,t){const n={};return t.forEach(r=>{r&&ra(e,r,n)}),n}function ra(e,t,n){if(n[t.name]){v&&p.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,mi.indexOf(t.name)===-1&&(t.setupOnce(ul,B),mi.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(s)}v&&p.log(`Integration installed: ${t.name}`)}function Vy(e){const t=F();if(!t||!t.addIntegration){v&&p.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function Ql(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function ge(e,t){return Object.assign(function(...r){return{setupOnce:()=>{},...t(...r)}},{id:e})}const sa="c",ia="g",oa="s",aa="d",ca=/[^a-zA-Z0-9_/.-]+/g,ed=/[^\w\d_:/@.{}[\]$-]+/g,td=5e3;function nd(e,t,n,r){const s=Object.entries(me(r)).sort((i,o)=>i[0].localeCompare(o[0]));return`${e}${t}${n}${s}`}function rd(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t&=t}return t>>>0}function sd(e){let t="";for(const n of e){const r=Object.entries(n.tags),s=r.length>0?`|#${r.map(([i,o])=>`${i}:${o}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}
`}return t}function id(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=n.replace(ca,"_");t[r]=String(e[n]).replace(ed,"_")}return t}function od(e,t,n,r){const s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(s.dsn=Nt(t));const i=ad(e);return it(s,[i])}function ad(e){const t=sd(e);return[{type:"statsd",length:t.length},t]}const gi="Not capturing exception because it's already been captured.";class cd{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=bo(t.dsn):v&&p.warn("No DSN provided, client will not send events."),this._dsn){const n=na(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(ei(t)){v&&p.log(gi);return}let s=n&&n.event_id;return this._process(this.eventFromException(t,n).then(i=>this._captureEvent(i,n,r)).then(i=>{s=i})),s}captureMessage(t,n,r,s){let i=r&&r.event_id;const o=rs(t)?t:String(t),a=ss(t)?this.eventFromMessage(o,n,r):this.eventFromException(t,r);return this._process(a.then(c=>this._captureEvent(c,r,s)).then(c=>{i=c})),i}captureEvent(t,n,r){if(n&&n.originalException&&ei(n.originalException)){v&&p.log(gi);return}let s=n&&n.event_id;return this._process(this._captureEvent(t,n,r).then(i=>{s=i})),s}captureSession(t){typeof t.release!="string"?v&&p.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),et(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):wt(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&(this._integrations=Zl(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return v&&p.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){ra(this,t,this._integrations)}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=ea(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=Ju(r,tl(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const n=ql(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const s=`${t}:${n}`;v&&p.log(`Adding outcome: "${s}"`),this._outcomes[s]=this._outcomes[s]+1||1}}captureAggregateMetrics(t){v&&p.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=od(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_updateSessionFromEvent(t,n){let r=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const c of i){const u=c.mechanism;if(u&&u.handled===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(et(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new fe(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,t&&r>=t&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s=Dt()){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",t,n),ms(i,t,n,r,this,s).then(a=>{if(a===null)return a;const{propagationContext:c}=a.sdkProcessingMetadata||{};if(!(a.contexts&&a.contexts.trace)&&c){const{traceId:d,spanId:l,parentSpanId:f,dsc:h}=c;a.contexts={trace:{trace_id:d,span_id:l,parent_span_id:f},...a.contexts};const m=h||Vn(d,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:m,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(s=>s.event_id,s=>{if(v){const i=s;i.logLevel==="log"?p.log(i.message):p.warn(i)}})}_processEvent(t,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=la(t),a=ua(t),c=t.type||"error",u=`before send for type \`${c}\``;if(a&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",t),us(new Ce(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const d=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,r).then(l=>{if(l===null)throw this.recordDroppedEvent("event_processor",d,t),new Ce("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return l;const h=ld(s,l,n);return ud(h,u)}).then(l=>{if(l===null)throw this.recordDroppedEvent("before_send",d,t),new Ce(`${u} returned \`null\`, will not send event.`,"log");const f=r&&r.getSession();!o&&f&&this._updateSessionFromEvent(f,l);const h=l.transaction_info;if(o&&h&&l.transaction!==t.transaction){const m="custom";l.transaction_info={...h,source:m}}return this.sendEvent(l,n),l}).then(null,l=>{throw l instanceof Ce?l:(this.captureException(l,{data:{__sentry__:!0},originalException:l}),new Ce(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${l}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{v&&p.error("Error while sending event:",n)});v&&p.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:t[n]}})}}function ud(e,t){const n=`${t} must return \`null\` or a valid event.`;if(tn(e))return e.then(r=>{if(!Tt(r)&&r!==null)throw new Ce(n);return r},r=>{throw new Ce(`${t} rejected with ${r}`)});if(!Tt(e)&&e!==null)throw new Ce(n);return e}function ld(e,t,n){const{beforeSend:r,beforeSendTransaction:s}=e;return ua(t)&&r?r(t,n):la(t)&&s?s(t,n):t}function ua(e){return e.type===void 0}function la(e){return e.type==="transaction"}function dd(e){const t=F();!t||!t.addEventProcessor||t.addEventProcessor(e)}class fd{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}}class hd{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class pd{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}}class md{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>typeof t=="string"?rd(t):t).join(":")}}const gd={[sa]:fd,[ia]:hd,[aa]:pd,[oa]:md};function _d(e,t){t.debug===!0&&(v?p.enable():Qe(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}));const n=B();n.getScope().update(t.initialScope);const s=new e(t);n.bindClient(s)}const yd=30;function da(e,t,n=ju(e.bufferSize||yd)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(kt(o,(l,f)=>{const h=ii(f);if(Bo(r,h)){const m=_i(l,f);e.recordDroppedEvent("ratelimit_backoff",h,m)}else a.push(l)}),a.length===0)return wt();const c=it(o[0],a),u=l=>{kt(c,(f,h)=>{const m=_i(f,h);e.recordDroppedEvent(l,ii(h),m)})},d=()=>t({body:Po(c,e.textEncoder)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&v&&p.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Ho(r,l),l),l=>{throw u("network_error"),l});return n.add(d).then(l=>l,l=>{if(l instanceof Ce)return v&&p.error("Skipped sending event because buffer is full."),u("queue_overflow"),wt();throw l})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function _i(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}const Sd=100,yi=5e3,bd=36e5;function fr(e,t){v&&p.info(`[Offline]: ${e}`,t)}function Ed(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let s=yi,i;function o(d,l,f){return Zu(d,["replay_event","replay_recording","client_report"])?!1:t.shouldStore?t.shouldStore(d,l,f):!0}function a(d){r&&(i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const l=await r.pop();l&&(fr("Attempting to send previously queued event"),u(l).catch(f=>{fr("Failed to retry sending",f)}))},d),typeof i!="number"&&i.unref&&i.unref())}function c(){i||(a(s),s=Math.min(s*2,bd))}async function u(d){try{const l=await n.send(d);let f=Sd;if(l){if(l.headers&&l.headers["retry-after"])f=$o(l.headers["retry-after"]);else if((l.statusCode||0)>=400)return l}return a(f),s=yi,l}catch(l){if(r&&await o(d,l,s))return await r.insert(d),c(),fr("Error sending. Event queued",l),{};throw l}}return t.flushAtStartup&&c(),{send:u,flush:d=>n.flush(d)}}}function fa(e,t){let n;return kt(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function vd(e,t){return n=>{const r=e(n);return{send:async s=>{const i=fa(s,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(s)},flush:s=>r.flush(s)}}}function Ky(e,t){return n=>{const r=e(n),s={};function i(c,u){const d=u?`${c}:${u}`:c;if(!s[d]){const l=yo(c);if(!l)return;const f=na(l);s[d]=u?vd(e,u)({...n,url:f}):e({...n,url:f})}return s[d]}async function o(c){function u(f){const h=f&&f.length?f:["event"];return fa(c,h)}const d=t({envelope:c,getEvent:u}).map(f=>typeof f=="string"?i(f,void 0):i(f.dsn,f.release)).filter(f=>!!f);return d.length===0&&d.push(r),(await Promise.all(d.map(f=>f.send(c))))[0]}async function a(c){const u=[...Object.keys(s).map(l=>s[l]),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:o,flush:a}}}let Si;const ha="FunctionToString",Td=()=>({name:ha,setupOnce(){Si=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=os(this)||this;return Si.apply(t,e)}}catch{}}}),pa=ge(ha,Td),wd=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],kd=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],ma="InboundFilters",Id=e=>({name:ma,processEvent(t,n,r){const s=r.getOptions(),i=Rd(e,s);return Cd(t,i)?null:t}}),ga=ge(ma,Id);function Rd(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:wd],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:kd],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function Cd(e,t){return t.ignoreInternal&&Dd(e)?(v&&p.warn(`Event dropped due to being internal Sentry Error.
Event: ${He(e)}`),!0):xd(e,t.ignoreErrors)?(v&&p.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${He(e)}`),!0):Md(e,t.ignoreTransactions)?(v&&p.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${He(e)}`),!0):Ad(e,t.denyUrls)?(v&&p.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${He(e)}.
Url: ${An(e)}`),!0):Od(e,t.allowUrls)?!1:(v&&p.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${He(e)}.
Url: ${An(e)}`),!0)}function xd(e,t){return e.type||!t||!t.length?!1:Nd(e).some(n=>At(n,t))}function Md(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?At(n,t):!1}function Ad(e,t){if(!t||!t.length)return!1;const n=An(e);return n?At(n,t):!1}function Od(e,t){if(!t||!t.length)return!0;const n=An(e);return n?At(n,t):!0}function Nd(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),v&&t.length===0&&p.error(`Could not extract message for event ${He(e)}`),t}function Dd(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function Ld(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function An(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?Ld(t):null}catch{return v&&p.error(`Cannot extract url for event ${He(e)}`),null}}const Pd="cause",Fd=5,_a="LinkedErrors",$d=(e={})=>{const t=e.limit||Fd,n=e.key||Pd;return{name:_a,preprocessEvent(r,s,i){const o=i.getOptions();po(al,o.stackParser,o.maxValueLength,n,t,r,s)}}},Bd=ge(_a,$d),Hd=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:pa,InboundFilters:ga,LinkedErrors:Bd},Symbol.toStringTag,{value:"Module"}));function Ud(e,t){const n=t&&Wd(t)?t.getClient():t,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return zd(e,r)||jd(e,s)}function jd(e,t){return t?bi(e)===bi(t):!1}function zd(e,t){return t?e.includes(t.host):!1}function bi(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Wd(e){return e.getClient!==void 0}const ya=new Map,Ei=new Set;function qd(e){if(A._sentryModuleMetadata)for(const t of Object.keys(A._sentryModuleMetadata)){const n=A._sentryModuleMetadata[t];if(Ei.has(t))continue;Ei.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){ya.set(s.filename,n);break}}}function Gd(e,t){return qd(e),ya.get(t)}function Yd(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename)continue;const s=Gd(e,r.filename);s&&(r.module_metadata=s)}})}catch{}}function Vd(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}const Sa="ModuleMetadata",Kd=()=>({name:Sa,setup(e){typeof e.on=="function"&&e.on("beforeEnvelope",t=>{kt(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(Vd(s),n[1]=s)}})})},processEvent(e,t,n){const r=n.getOptions().stackParser;return Yd(r,e),e}}),Xy=ge(Sa,Kd);class Xd{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),td)}add(t,n,r,s="none",i={},o=st()){const a=Math.floor(o),c=n.replace(ca,"_"),u=id(i),d=nd(t,c,s,u),l=this._buckets.get(d);l?(l.metric.add(r),l.timestamp<a&&(l.timestamp=a)):this._buckets.set(d,{metric:new gd[t](r),timestamp:a,metricType:t,name:c,unit:s,tags:u})}flush(){if(this._buckets.size!==0){if(this._client.captureAggregateMetrics){const t=Array.from(this._buckets).map(([,n])=>n);this._client.captureAggregateMetrics(t)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const ba="MetricsAggregator",Jd=()=>({name:ba,setup(e){e.metricsAggregator=new Xd(e)}}),Zd=ge(ba,Jd);function Xn(e,t,n,r={}){const s=F(),i=ue();if(s){if(!s.metricsAggregator){v&&p.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs");return}const{unit:o,tags:a,timestamp:c}=r,{release:u,environment:d}=s.getOptions(),l=i.getTransaction(),f={};u&&(f.release=u),d&&(f.environment=d),l&&(f.transaction=ce(l).description||""),v&&p.log(`Adding value of ${n} to ${e} metric ${t}`),s.metricsAggregator.add(e,t,n,o,{...f,...a},c)}}function Qd(e,t=1,n){Xn(sa,e,t,n)}function ef(e,t,n){Xn(aa,e,t,n)}function tf(e,t,n){Xn(oa,e,t,n)}function nf(e,t,n){Xn(ia,e,t,n)}const Jy={increment:Qd,distribution:ef,set:tf,gauge:nf,MetricsAggregator:Zd},w=A;let Hr=0;function Ea(){return Hr>0}function rf(){Hr++,setTimeout(()=>{Hr--})}function tt(e,t={},n){if(typeof e!="function")return e;try{const s=e.__sentry_wrapped__;if(s)return s;if(os(e))return e}catch{return e}const r=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const i=s.map(o=>tt(o,t));return e.apply(this,i)}catch(i){throw rf(),Yn(o=>{o.addEventProcessor(a=>(t.mechanism&&(Ir(a,void 0,void 0),Vt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),gs(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}Eo(r,e),Yt(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const L=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function va(e,t){const n=Es(e,t),r={type:t&&t.name,value:cf(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function sf(e,t,n,r){const s=F(),i=s&&s.getOptions().normalizeDepth,o={exception:{values:[{type:zn(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:df(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Ao(t,i)}};if(n){const a=Es(e,n);a.length&&(o.exception.values[0].stacktrace={frames:a})}return o}function hr(e,t){return{exception:{values:[va(e,t)]}}}function Es(e,t){const n=t.stacktrace||t.stack||"",r=af(t);try{return e(n,r)}catch{}return[]}const of=/Minified React error #\d+;/i;function af(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(of.test(e.message))return 1}return 0}function cf(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function uf(e,t,n,r){const s=n&&n.syntheticException||void 0,i=vs(e,t,s,r);return Vt(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),wt(i)}function lf(e,t,n="info",r,s){const i=r&&r.syntheticException||void 0,o=Ur(e,t,i,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),wt(o)}function vs(e,t,n,r,s){let i;if(ns(t)&&t.error)return hr(e,t.error);if(qs(t)||Zc(t)){const o=t;if("stack"in t)i=hr(e,t);else{const a=o.name||(qs(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=Ur(e,c,n,r),Ir(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return lo(t)?hr(e,t):Tt(t)||zn(t)?(i=sf(e,t,n,s),Vt(i,{synthetic:!0}),i):(i=Ur(e,t,n,r),Ir(i,`${t}`,void 0),Vt(i,{synthetic:!0}),i)}function Ur(e,t,n,r){const s={};if(r&&n){const i=Es(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]})}if(rs(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return s.logentry={message:i,params:o},s}return s.message=t,s}function df(e,{isUnhandledRejection:t}){const n=hu(e),r=t?"promise rejection":"exception";return ns(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:zn(e)?`Event \`${ff(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function ff(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function hf(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Nt(r)}},i=pf(e);return it(s,[i])}function pf(e){return[{type:"user_report"},e]}class mf extends cd{constructor(t){const n=w.SENTRY_SDK_SOURCE||Du();t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:Fr}],version:Fr},super(t),t.sendClientReports&&w.document&&w.document.addEventListener("visibilitychange",()=>{w.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return uf(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return lf(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){L&&p.warn("SDK not enabled, will not capture user feedback.");return}const n=hf(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){L&&p.log("No outcomes to send");return}if(!this._dsn){L&&p.log("No dsn provided, will not send outcomes");return}L&&p.log("Sending outcomes:",t);const n=rl(t,this._options.tunnel&&Nt(this._dsn));this._sendEnvelope(n)}}let Ut;function gf(){if(Ut)return Ut;if(Mr(w.fetch))return Ut=w.fetch.bind(w);const e=w.document;let t=w.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){L&&p.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Ut=t.bind(w)}function _f(){Ut=void 0}function yf(e,t=gf()){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return _f(),n-=o,r--,us(c)}}return da(e,s)}const Sf=4;function bf(e){function t(n){return new fe((r,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===Sf&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url);for(const o in e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&i.setRequestHeader(o,e.headers[o]);i.send(n.body)})}return da(e,t)}const Pt="?",Ef=10,vf=20,Tf=30,wf=40,kf=50;function an(e,t,n,r){const s={filename:e,function:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const If=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Rf=/\((\S*)(?::(\d+))(?::(\d+))\)/,Cf=e=>{const t=If.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const i=Rf.exec(t[2]);i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3])}const[r,s]=Ta(t[1]||Pt,t[2]);return an(s,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},xf=[Tf,Cf],Mf=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Af=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Of=e=>{const t=Mf.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=Af.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],s=t[1]||Pt;return[s,r]=Ta(s,r),an(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Nf=[kf,Of],Df=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Lf=e=>{const t=Df.exec(e);return t?an(t[2],t[1]||Pt,+t[3],t[4]?+t[4]:void 0):void 0},Pf=[wf,Lf],Ff=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,$f=e=>{const t=Ff.exec(e);return t?an(t[2],t[3]||Pt,+t[1]):void 0},Zy=[Ef,$f],Bf=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Hf=e=>{const t=Bf.exec(e);return t?an(t[5],t[3]||t[4]||Pt,+t[1],+t[2]):void 0},Qy=[vf,Hf],Uf=[xf,Nf,Pf],jf=wo(...Uf),Ta=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Pt,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},wa="GlobalHandlers",zf=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:wa,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Wf(n),vi("onerror")),t.onunhandledrejection&&(qf(n),vi("onunhandledrejection"))}}},ka=ge(wa,zf);function Wf(e){xo(t=>{const{stackParser:n,attachStacktrace:r}=Ra();if(F()!==e||Ea())return;const{msg:s,url:i,line:o,column:a,error:c}=t,u=c===void 0&&Ae(s)?Vf(s,i,o,a):Ia(vs(n,c||s,void 0,r,!1),i,o,a);u.level="error",Wo(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function qf(e){Mo(t=>{const{stackParser:n,attachStacktrace:r}=Ra();if(F()!==e||Ea())return;const s=Gf(t),i=ss(s)?Yf(s):vs(n,s,void 0,r,!0);i.level="error",Wo(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Gf(e){if(ss(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function Yf(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Vf(e,t,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=ns(e)?e.message:e,o="Error";const a=i.match(s);return a&&(o=a[1],i=a[2]),Ia({exception:{values:[{type:o,value:i}]}},t,n,r)}function Ia(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,l=Ae(t)&&t.length>0?t:go();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),e}function vi(e){L&&p.log(`Global Handler attached: ${e}`)}function Ra(){const e=F();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Kf=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ca="TryCatch",Xf=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Ca,setupOnce(){t.setTimeout&&se(w,"setTimeout",Ti),t.setInterval&&se(w,"setInterval",Ti),t.requestAnimationFrame&&se(w,"requestAnimationFrame",Jf),t.XMLHttpRequest&&"XMLHttpRequest"in w&&se(XMLHttpRequest.prototype,"send",Zf);const n=t.eventTarget;n&&(Array.isArray(n)?n:Kf).forEach(Qf)}}},xa=ge(Ca,Xf);function Ti(e){return function(...t){const n=t[0];return t[0]=tt(n,{mechanism:{data:{function:Le(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Jf(e){return function(t){return e.apply(this,[tt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Le(e)},handled:!1,type:"instrument"}})])}}function Zf(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&se(n,s,function(i){const o={mechanism:{data:{function:s,handler:Le(i)},handled:!1,type:"instrument"}},a=os(i);return a&&(o.mechanism.data.handler=Le(a)),tt(i,o)})}),e.apply(this,t)}}function Qf(e){const t=w,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(se(n,"addEventListener",function(r){return function(s,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=tt(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Le(i),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,tt(i,{mechanism:{data:{function:"addEventListener",handler:Le(i),target:e},handled:!1,type:"instrument"}}),o])}}),se(n,"removeEventListener",function(r){return function(s,i,o){const a=i;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,s,c,o)}catch{}return r.call(this,s,a,o)}}))}const yn=1024,Ma="Breadcrumbs",eh=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Ma,setup(n){t.console&&gu(rh(n)),t.dom&&Ro(nh(n,t.dom)),t.xhr&&cs(sh(n)),t.fetch&&as(ih(n)),t.history&&Wn(oh(n)),t.sentry&&n.on&&n.on("beforeSendEvent",th(n))}}},Aa=ge(Ma,eh);function th(e){return function(n){F()===e&&We({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:He(n)},{event:n})}}function nh(e,t){return function(r){if(F()!==e)return;let s,i,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>yn&&(L&&p.warn(`\`dom.maxStringLength\` cannot exceed ${yn}, but a value of ${a} was configured. Sentry will use ${yn} instead.`),a=yn),typeof o=="string"&&(o=[o]);try{const u=r.event,d=ah(u)?u.target:u;s=Ze(d,{keyAttrs:o,maxStringLength:a}),i=_o(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),We(c,{event:r.event,name:r.name,global:r.global})}}function rh(e){return function(n){if(F()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Wu(n.level),message:Gs(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Gs(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;We(r,{input:n.args,level:n.level})}}function sh(e){return function(n){if(F()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[Ue];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,d={method:o,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s};We({category:"xhr",data:d,type:"http"},l)}}function ih(e){return function(n){if(F()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s};We({category:"fetch",data:i,level:"error",type:"http"},o)}else{const i=n.response,o={...n.fetchData,status_code:i&&i.status},a={input:n.args,response:i,startTimestamp:r,endTimestamp:s};We({category:"fetch",data:o,type:"http"},a)}}}function oh(e){return function(n){if(F()!==e)return;let r=n.from,s=n.to;const i=ur(w.location.href);let o=r?ur(r):void 0;const a=ur(s);(!o||!o.path)&&(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),We({category:"navigation",data:{from:r,to:s}})}}function ah(e){return!!e&&!!e.target}const ch="cause",uh=5,Oa="LinkedErrors",lh=(e={})=>{const t=e.limit||uh,n=e.key||ch;return{name:Oa,preprocessEvent(r,s,i){const o=i.getOptions();po(va,o.stackParser,o.maxValueLength,n,t,r,s)}}},Na=ge(Oa,lh),Da="HttpContext",dh=()=>({name:Da,preprocessEvent(e){if(!w.navigator&&!w.location&&!w.document)return;const t=e.request&&e.request.url||w.location&&w.location.href,{referrer:n}=w.document||{},{userAgent:r}=w.navigator||{},s={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:s};e.request=i}}),La=ge(Da,dh),Pa="Dedupe",fh=()=>{let e;return{name:Pa,processEvent(t){if(t.type)return t;try{if(hh(t,e))return L&&p.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},Fa=ge(Pa,fh);function hh(e,t){return t?!!(ph(e,t)||mh(e,t)):!1}function ph(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Ba(e,t)||!$a(e,t))}function mh(e,t){const n=wi(t),r=wi(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Ba(e,t)||!$a(e,t))}function $a(e,t){let n=ki(e),r=ki(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Ba(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function wi(e){return e.exception&&e.exception.values&&e.exception.values[0]}function ki(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const gh=[new ga,new pa,new xa,new Aa,new ka,new Na,new Fa,new La];function eS(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=gh),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),w.SENTRY_RELEASE&&w.SENTRY_RELEASE.id&&(e.release=w.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:pu(e.stackParser||jf),integrations:Jl(e),transport:e.transport||(Co()?yf:bf)};_d(mf,t),e.autoSessionTracking&&_h()}const tS=(e={},t=B())=>{if(!w.document){L&&p.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=t.getStackTop(),s=e.dsn||n&&n.getDsn();if(!s){L&&p.error("DSN not configured for showReportDialog call");return}r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=w.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=Kl(s,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:o}=e;if(o){const c=u=>{if(u.data==="__sentry_reportdialog_closed__")try{o()}finally{w.removeEventListener("message",c)}};w.addEventListener("message",c)}const a=w.document.head||w.document.body;a?a.appendChild(i):L&&p.error("Not injecting report dialog. No injection point found in HTML")};function nS(){}function rS(e){e()}function sS(e){return tt(e)()}function _h(){if(typeof w.document>"u"){L&&p.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}ci({ignoreDuration:!0}),ui(),Wn(({from:e,to:t})=>{e!==void 0&&e!==t&&(ci({ignoreDuration:!0}),ui())})}function iS(e){const t=F();t&&t.captureUserFeedback(e)}const yh=Object.freeze(Object.defineProperty({__proto__:null,Breadcrumbs:Aa,Dedupe:Fa,GlobalHandlers:ka,HttpContext:La,LinkedErrors:Na,TryCatch:xa},Symbol.toStringTag,{value:"Module"})),V=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,j=A;function Sh(){j&&j.document?j.document.addEventListener("visibilitychange",()=>{const e=Lt();if(j.document.hidden&&e){const t="cancelled";V&&p.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):V&&p.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Ts=(e,t,n)=>{let r,s;return i=>{t.value>=0&&(i||n)&&(s=t.value-(r||0),(s||r===void 0)&&(r=t.value,t.delta=s,e(t)))}},bh=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Eh=()=>{const e=j.performance.timing,t=j.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},Ha=()=>j.__WEB_VITALS_POLYFILL__?j.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Eh()):j.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],Ua=()=>{const e=Ha();return e&&e.activationStart||0},ws=(e,t)=>{const n=Ha();let r="navigate";return n&&(j.document.prerendering||Ua()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:bh(),navigationType:r}},Jn=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{t(s.getEntries())});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},Zn=(e,t)=>{const n=r=>{(r.type==="pagehide"||j.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},vh=e=>{const t=ws("CLS",0);let n,r=0,s=[];const i=a=>{a.forEach(c=>{if(!c.hadRecentInput){const u=s[0],d=s[s.length-1];r&&s.length!==0&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(r+=c.value,s.push(c)):(r=c.value,s=[c]),r>t.value&&(t.value=r,t.entries=s,n&&n())}})},o=Jn("layout-shift",i);if(o){n=Ts(e,t);const a=()=>{i(o.takeRecords()),n(!0)};return Zn(a),a}};let Rn=-1;const Th=()=>j.document.visibilityState==="hidden"&&!j.document.prerendering?0:1/0,wh=()=>{Zn(({timeStamp:e})=>{Rn=e},!0)},ks=()=>(Rn<0&&(Rn=Th(),wh()),{get firstHiddenTime(){return Rn}}),kh=e=>{const t=ks(),n=ws("FID");let r;const s=a=>{a.startTime<t.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},i=a=>{a.forEach(s)},o=Jn("first-input",i);r=Ts(e,n),o&&Zn(()=>{i(o.takeRecords()),o.disconnect()},!0)},Ii={},Ih=e=>{const t=ks(),n=ws("LCP");let r;const s=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-Ua(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},i=Jn("largest-contentful-paint",s);if(i){r=Ts(e,n);const o=()=>{Ii[n.id]||(s(i.takeRecords()),i.disconnect(),Ii[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),Zn(o,!0),o}},jt={},On={};let ja,za,Wa;function Rh(e){return Is("cls",e,xh,ja)}function qa(e){return Is("lcp",e,Ah,Wa)}function Ch(e){return Is("fid",e,Mh,za)}function Qn(e,t){return Ga(e,t),On[e]||(Oh(e),On[e]=!0),Ya(e,t)}function er(e,t){const n=jt[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(s){V&&p.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Le(r)}
Error:`,s)}}function xh(){vh(e=>{er("cls",{metric:e}),ja=e})}function Mh(){kh(e=>{er("fid",{metric:e}),za=e})}function Ah(){Ih(e=>{er("lcp",{metric:e}),Wa=e})}function Is(e,t,n,r){return Ga(e,t),On[e]||(n(),On[e]=!0),r&&t({metric:r}),Ya(e,t)}function Oh(e){const t={};e==="event"&&(t.durationThreshold=0),Jn(e,n=>{er(e,{entries:n})},t)}function Ga(e,t){jt[e]=jt[e]||[],jt[e].push(t)}function Ya(e,t){return()=>{const n=jt[e];if(!n)return;const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}function pr(e){return typeof e=="number"&&isFinite(e)}function It(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const Nh=2147483647;function ne(e){return e/1e3}function Va(){return j&&j.addEventListener&&j.performance}let Ri=0,K={},ke,zt;function Dh(){const e=Va();if(e&&pe){e.mark&&j.performance.mark("sentry-tracing-init");const t=Bh(),n=Fh(),r=$h();return()=>{t(),n(),r()}}return()=>{}}function Lh(){Qn("longtask",({entries:e})=>{for(const t of e){const n=Lt();if(!n)return;const r=ne(pe+t.startTime),s=ne(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s})}})}function Ph(){Qn("event",({entries:e})=>{for(const t of e){const n=Lt();if(!n)return;if(t.name==="click"){const r=ne(pe+t.startTime),s=ne(t.duration),i={description:Ze(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s},o=_o(t.target);o&&(i.attributes={"ui.component_name":o}),n.startChild(i)}}})}function Fh(){return Rh(({metric:e})=>{const t=e.entries.pop();t&&(V&&p.log("[Measurements] Adding CLS"),K.cls={value:e.value,unit:""},zt=t)})}function $h(){return qa(({metric:e})=>{const t=e.entries.pop();t&&(V&&p.log("[Measurements] Adding LCP"),K.lcp={value:e.value,unit:"millisecond"},ke=t)})}function Bh(){return Ch(({metric:e})=>{const t=e.entries.pop();if(!t)return;const n=ne(pe),r=ne(t.startTime);V&&p.log("[Measurements] Adding FID"),K.fid={value:e.value,unit:"millisecond"},K["mark.fid"]={value:n+r,unit:"second"}})}function Hh(e){const t=Va();if(!t||!j.performance.getEntries||!pe)return;V&&p.log("[Tracing] Adding & adjusting spans using Performance API");const n=ne(pe),r=t.getEntries();let s,i;if(r.slice(Ri).forEach(o=>{const a=ne(o.startTime),c=ne(o.duration);if(!(e.op==="navigation"&&n+a<e.startTimestamp))switch(o.entryType){case"navigation":{jh(e,o,n),s=n+ne(o.responseStart),i=n+ne(o.requestStart);break}case"mark":case"paint":case"measure":{Uh(e,o,a,c,n);const u=ks(),d=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&d&&(V&&p.log("[Measurements] Adding FP"),K.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&d&&(V&&p.log("[Measurements] Adding FCP"),K.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{const u=o.name.replace(j.location.origin,"");Wh(e,o,u,a,c,n);break}}}),Ri=Math.max(r.length-1,0),qh(e),e.op==="pageload"){typeof s=="number"&&(V&&p.log("[Measurements] Adding TTFB"),K.ttfb={value:(s-e.startTimestamp)*1e3,unit:"millisecond"},typeof i=="number"&&i<=s&&(K["ttfb.requestTime"]={value:(s-i)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!K[a]||n>=e.startTimestamp)return;const c=K[a].value,u=n+ne(c),d=Math.abs((u-e.startTimestamp)*1e3),l=d-c;V&&p.log(`[Measurements] Normalized ${a} from ${c} to ${d} (${l})`),K[a].value=d});const o=K["mark.fid"];o&&K.fid&&(It(e,{description:"first input delay",endTimestamp:o.value+ne(K.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete K["mark.fid"]),"fcp"in K||delete K.cls,Object.keys(K).forEach(a=>{e.setMeasurement(a,K[a].value,K[a].unit)}),Gh(e)}ke=void 0,zt=void 0,K={}}function Uh(e,t,n,r,s){const i=s+n,o=i+r;return It(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i}),i}function jh(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Sn(e,t,r,n)}),Sn(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),Sn(e,t,"fetch",n,"cache","domainLookupStart"),Sn(e,t,"domainLookup",n,"DNS"),zh(e,t,n)}function Sn(e,t,n,r,s,i){const o=i?t[i]:t[`${n}End`],a=t[`${n}Start`];!a||!o||It(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+ne(a),endTimestamp:r+ne(o)})}function zh(e,t,n){It(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+ne(t.requestStart),endTimestamp:n+ne(t.responseEnd)}),It(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+ne(t.responseStart),endTimestamp:n+ne(t.responseEnd)})}function Wh(e,t,n,r,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const o={};mr(o,t,"transferSize","http.response_transfer_size"),mr(o,t,"encodedBodySize","http.response_content_length"),mr(o,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus);const a=i+r,c=a+s;It(e,{description:n,endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:a,data:o})}function qh(e){const t=j.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),pr(n.rtt)&&(K["connection.rtt"]={value:n.rtt,unit:"millisecond"})),pr(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),pr(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function Gh(e){ke&&(V&&p.log("[Measurements] Adding LCP Data"),ke.element&&e.setTag("lcp.element",Ze(ke.element)),ke.id&&e.setTag("lcp.id",ke.id),ke.url&&e.setTag("lcp.url",ke.url.trim().slice(0,200)),e.setTag("lcp.size",ke.size)),zt&&zt.sources&&(V&&p.log("[Measurements] Adding CLS Data"),zt.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Ze(t.node))))}function mr(e,t,n,r){const s=t[n];s!=null&&s<Nh&&(e[r]=s)}function Yh(e,t,n,r,s="auto.http.browser"){if(!on()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const f=e.fetchData.__span;if(!f)return;const h=r[f];if(h){if(e.response){h.setHttpStatus(e.response.status);const m=e.response&&e.response.headers&&e.response.headers.get("content-length");if(m){const g=parseInt(m);g>0&&h.setAttribute("http.response_content_length",g)}}else e.error&&h.setStatus("internal_error");h.end(),delete r[f]}return}const o=ue(),a=F(),c=Ss(),{method:u,url:d}=e.fetchData,l=i&&c?c.startChild({data:{url:d,type:"fetch","http.method":u},description:`${u} ${d}`,op:"http.client",origin:s}):void 0;if(l&&(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l),n(e.fetchData.url)&&a){const f=e.args[0];e.args[1]=e.args[1]||{};const h=e.args[1];h.headers=Vh(f,a,o,h,l)}return l}function Vh(e,t,n,r,s){const i=s||n.getSpan(),o=i&&i.transaction,{traceId:a,sampled:c,dsc:u}=n.getPropagationContext(),d=i?qn(i):ls(a,void 0,c),l=o?Kt(o):u||Vn(a,t,n),f=Lr(l),h=typeof Request<"u"&&De(e,Request)?e.headers:r.headers;if(h)if(typeof Headers<"u"&&De(h,Headers)){const m=new Headers(h);return m.append("sentry-trace",d),f&&m.append(Dr,f),m}else if(Array.isArray(h)){const m=[...h,["sentry-trace",d]];return f&&m.push([Dr,f]),m}else{const m="baggage"in h?h.baggage:void 0,g=[];return Array.isArray(m)?g.push(...m):m&&g.push(m),f&&g.push(f),{...h,"sentry-trace":d,baggage:g.length>0?g.join(","):void 0}}else return{"sentry-trace":d,baggage:f}}const jr=["localhost",/^\/(?!\/)/],zr={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:jr,tracePropagationTargets:jr};function Kh(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o}={traceFetch:zr.traceFetch,traceXHR:zr.traceXHR,...e},a=typeof i=="function"?i:d=>!0,c=d=>Qh(d,r||s),u={};t&&as(d=>{const l=Yh(d,a,c,u);o&&l&&Ci(l)}),n&&cs(d=>{const l=ep(d,a,c,u);o&&l&&Ci(l)})}function Xh(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Ci(e){const{url:t}=ce(e).data||{};if(!t||typeof t!="string")return;const n=Qn("resource",({entries:r})=>{r.forEach(s=>{Xh(s)&&s.name.endsWith(t)&&(Zh(s).forEach(o=>e.setAttribute(...o)),setTimeout(n))})})}function Jh(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function we(e=0){return((pe||performance.timeOrigin)+e)/1e3}function Zh(e){const{name:t,version:n}=Jh(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),pe?[...r,["http.request.redirect_start",we(e.redirectStart)],["http.request.fetch_start",we(e.fetchStart)],["http.request.domain_lookup_start",we(e.domainLookupStart)],["http.request.domain_lookup_end",we(e.domainLookupEnd)],["http.request.connect_start",we(e.connectStart)],["http.request.secure_connection_start",we(e.secureConnectionStart)],["http.request.connection_end",we(e.connectEnd)],["http.request.request_start",we(e.requestStart)],["http.request.response_start",we(e.responseStart)],["http.request.response_end",we(e.responseEnd)]]:r}function Qh(e,t){return At(e,t||jr)}function ep(e,t,n,r){const s=e.xhr,i=s&&s[Ue];if(!on()||!s||s.__sentry_own_request__||!i)return;const o=t(i.url);if(e.endTimestamp&&o){const d=s.__sentry_xhr_span_id__;if(!d)return;const l=r[d];l&&i.status_code!==void 0&&(l.setHttpStatus(i.status_code),l.end(),delete r[d]);return}const a=ue(),c=Ss(),u=o&&c?c.startChild({data:{type:"xhr","http.method":i.method,url:i.url},description:`${i.method} ${i.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(u&&(s.__sentry_xhr_span_id__=u.spanContext().spanId,r[s.__sentry_xhr_span_id__]=u),s.setRequestHeader&&n(i.url))if(u){const d=u&&u.transaction,l=d&&Kt(d),f=Lr(l);xi(s,qn(u),f)}else{const d=F(),{traceId:l,sampled:f,dsc:h}=a.getPropagationContext(),m=ls(l,void 0,f),g=h||(d?Vn(l,d,a):void 0),_=Lr(g);xi(s,m,_)}return u}function xi(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Dr,n)}catch{}}function tp(e,t=!0,n=!0){if(!j||!j.location){V&&p.warn("Could not initialize routing instrumentation due to invalid location");return}let r=j.location.href,s;t&&(s=e({name:j.location.pathname,startTimestamp:pe?pe/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Wn(({to:i,from:o})=>{if(o===void 0&&r&&r.indexOf(i)!==-1){r=void 0;return}o!==i&&(r=void 0,s&&(V&&p.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.end()),s=e({name:j.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const np="BrowserTracing",rp={...In,markBackgroundTransactions:!0,routingInstrumentation:tp,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...zr};class oS{constructor(t){this.name=np,this._hasSetTracePropagationTargets=!1,jl(),V&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...rp,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=Dh(),this.options.enableLongTask&&Lh(),this.options._experiments.enableInteractions&&Ph()}setupOnce(t,n){this._getCurrentHub=n;const s=n().getClient(),i=s&&s.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:d,traceXHR:l,shouldCreateSpanForRequest:f,enableHTTPTimings:h,_experiments:m}=this.options,g=i&&i.tracePropagationTargets,_=g||this.options.tracePropagationTargets;V&&this._hasSetTracePropagationTargets&&g&&p.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(y=>{const b=this._createRouteTransaction(y);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(b,y,n),b},c,a),u&&Sh(),m.enableInteractions&&this._registerInteractionListener(),Kh({traceFetch:d,traceXHR:l,tracePropagationTargets:_,shouldCreateSpanForRequest:f,enableHTTPTimings:h})}_createRouteTransaction(t){if(!this._getCurrentHub){V&&p.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:s,finalTimeout:i,heartbeatInterval:o}=this.options,a=t.op==="pageload",c=a?Mi("sentry-trace"):"",u=a?Mi("baggage"):"",{traceparentData:d,dynamicSamplingContext:l,propagationContext:f}=Lo(c,u),h={...t,...d,metadata:{...t.metadata,dynamicSamplingContext:d&&!l?{}:l},trimEnd:!0},m=typeof r=="function"?r(h):h,g=m===void 0?{...h,sampled:!1}:m;g.metadata=g.name!==h.name?{...g.metadata,source:"custom"}:g.metadata,this._latestRouteName=g.name;const _=t.data&&t.data[Et],y=g.metadata&&g.metadata.source;this._latestRouteSource=_||y,g.sampled===!1&&V&&p.log(`[Tracing] Will not send ${g.op} transaction because of beforeNavigate.`),V&&p.log(`[Tracing] Starting ${g.op} transaction on scope`);const{location:b}=j,I=pi(n,g,s,i,!0,{location:b},o),R=n.getScope();return a&&d?R.setPropagationContext(f):R.setPropagationContext({traceId:I.spanContext().traceId,spanId:I.spanContext().spanId,parentSpanId:I.parentSpanId,sampled:ps(I)}),I.registerBeforeFinishCallback(N=>{this._collectWebVitals(),Hh(N)}),I}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:i}=this.options,o="ui.action.click",a=Lt();if(a&&a.op&&["navigation","pageload"].includes(a.op)){V&&p.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub){V&&p.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){V&&p.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:u}=j,d={name:this._latestRouteName,op:o,trimEnd:!0,data:{[Et]:this._latestRouteSource||"url"}};t=pi(c,d,r,s,!0,{location:u},i)};["click"].forEach(r=>{addEventListener(r,n,{once:!1,capture:!0})})}}function Mi(e){const t=ou(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const G=A,Rs="sentryReplaySession",sp="replay_event",Cs="Unable to send Replay",ip=3e5,op=9e5,ap=5e3,cp=5500,up=6e4,lp=5e3,dp=3,Ai=15e4,bn=5e3,fp=3e3,hp=300,xs=2e7,pp=4999,mp=15e3,Oi=36e5,Ni={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}};function gp(e,t){return e??t()}function Nn(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}var re;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(re||(re={}));function _p(e){return e.nodeType===e.ELEMENT_NODE}function Wt(e){const t=Nn([e,"optionalAccess",n=>n.host]);return Nn([t,"optionalAccess",n=>n.shadowRoot])===e}function qt(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function yp(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function Sp(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Dn(e){try{const t=e.rules||e.cssRules;return t?yp(Array.from(t,Ka).join("")):null}catch{return null}}function Ka(e){let t;if(Ep(e))try{t=Dn(e.styleSheet)||Sp(e)}catch{}else if(vp(e)&&e.selectorText.includes(":"))return bp(e.cssText);return t||e.cssText}function bp(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Ep(e){return"styleSheet"in e}function vp(e){return"selectorText"in e}class Xa{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){if(!t)return-1;const n=Nn([this,"access",r=>r.getMeta,"call",r=>r(t),"optionalAccess",r=>r.id]);return gp(n,()=>-1)}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Tp(){return new Xa}function tr({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Xt({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Rt(e){return e.toLowerCase()}function Wr(e){return e.toUpperCase()}const Di="__rrweb_original__";function wp(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,o=Di in i?i[Di]:i;if(new Uint32Array(o.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Ms(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Rt(t):null}function Ln(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let kp=1;const Ip=new RegExp("[^a-z0-9-_:]"),Jt=-2;function As(){return kp++}function Rp(e){if(e instanceof HTMLFormElement)return"form";const t=Rt(e.tagName);return Ip.test(t)?"div":t}function Cp(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let ut,Li;const xp=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Mp=/^(?:[a-z+]+:)?\/\//i,Ap=/^www\..*/i,Op=/^(data:)([^,]*),(.*)/i;function Pn(e,t){return(e||"").replace(xp,(n,r,s,i,o,a)=>{const c=s||o||a,u=r||i||"";if(!c)return n;if(Mp.test(c)||Ap.test(c))return`url(${u}${c}${u})`;if(Op.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Cp(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const Np=/^[^ \t\n\r\u000c]+/,Dp=/^[, \t\n\r\u000c]+/;function Lp(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const a=i.exec(t.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(Dp),!(n>=t.length);){let i=r(Np);if(i.slice(-1)===",")i=mt(e,i.substring(0,i.length-1)),s.push(i);else{let o="";i=mt(e,i);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}function mt(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function Pp(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Os(){const e=document.createElement("a");return e.href="",e.href}function Ja(e,t,n,r,s,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?mt(e,r):n==="srcset"?Lp(e,r):n==="style"?Pn(r,Os()):t==="object"&&n==="data"?mt(e,r):typeof i=="function"?i(n,r,s):r)}function Za(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Fp(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const i=e.classList[s];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function $p(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Xe(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Xe(e.parentNode,t,n,r+1)}function gt(e,t){return n=>{const r=n;if(r===null)return!1;if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if($p(r,e))return!0}return!!(t&&r.matches(t))}}function Ct(e,t,n,r,s,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;let a=-1,c=-1;if(i){if(c=Xe(o,gt(r,s)),c<0)return!0;a=Xe(o,gt(t,n),c>=0?c:1/0)}else{if(a=Xe(o,gt(t,n)),a<0)return!1;c=Xe(o,gt(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function Bp(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=setTimeout(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{clearTimeout(a),s=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function Hp(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const i=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(i),r=!0,t()})}function Up(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:m={},maskTextFn:g,maskInputFn:_,dataURLOptions:y={},inlineImages:b,recordCanvas:I,keepIframeSrcFn:R,newlyAddedElement:N=!1}=t,T=jp(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:re.Document,childNodes:[],compatMode:e.compatMode}:{type:re.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:re.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:T};case e.ELEMENT_NODE:return Wp(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:m,maskInputFn:_,dataURLOptions:y,inlineImages:b,recordCanvas:I,keepIframeSrcFn:R,newlyAddedElement:N,rootId:T,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f});case e.TEXT_NODE:return zp(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:g,maskInputOptions:m,maskInputFn:_,rootId:T});case e.CDATA_SECTION_NODE:return{type:re.CDATA,textContent:"",rootId:T};case e.COMMENT_NODE:return{type:re.Comment,textContent:e.textContent||"",rootId:T};default:return!1}}function jp(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function zp(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const h=l==="STYLE"?!0:void 0,m=l==="SCRIPT"?!0:void 0,g=l==="TEXTAREA"?!0:void 0;if(h&&f){try{e.nextSibling||e.previousSibling||Nn([e,"access",y=>y.parentNode,"access",y=>y.sheet,"optionalAccess",y=>y.cssRules])&&(f=Dn(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=Pn(f,Os())}m&&(f="SCRIPT_PLACEHOLDER");const _=Ct(e,r,i,s,o,n);if(!h&&!m&&!g&&f&&_&&(f=a?a(f):f.replace(/[\S]/g,"*")),g&&f&&(c.textarea||_)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const y=tr({type:null,tagName:l,maskInputOptions:c});f=Xt({isMasked:Ct(e,r,i,s,o,y),element:e,value:f,maskInputFn:u})}return{type:re.Text,textContent:f||"",isStyle:h,rootId:d}}function Wp(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:m=!1,rootId:g,maskAllText:_,maskTextClass:y,unmaskTextClass:b,maskTextSelector:I,unmaskTextSelector:R}=t,N=Fp(e,r,s,i),T=Rp(e);let E={};const O=e.attributes.length;for(let S=0;S<O;S++){const k=e.attributes[S];Za(T,k.name,k.value)||(E[k.name]=Ja(n,T,Rt(k.name),k.value,e,c))}if(T==="link"&&o){const S=Array.from(n.styleSheets).find(W=>W.href===e.href);let k=null;S&&(k=Dn(S)),k&&(delete E.rel,delete E.href,E._cssText=Pn(k,S.href))}if(T==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const S=Dn(e.sheet);S&&(E._cssText=Pn(S,Os()))}if(T==="input"||T==="textarea"||T==="select"||T==="option"){const S=e,k=Ms(S),W=Ln(S,Wr(T),k),ee=S.checked;if(k!=="submit"&&k!=="button"&&W){const X=Ct(S,y,I,b,R,tr({type:k,tagName:Wr(T),maskInputOptions:a}));E.value=Xt({isMasked:X,element:S,value:W,maskInputFn:u})}ee&&(E.checked=ee)}if(T==="option"&&(e.selected&&!a.select?E.selected=!0:delete E.selected),T==="canvas"&&f){if(e.__context==="2d")wp(e)||(E.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const S=e.toDataURL(d.type,d.quality),k=document.createElement("canvas");k.width=e.width,k.height=e.height;const W=k.toDataURL(d.type,d.quality);S!==W&&(E.rr_dataURL=S)}}if(T==="img"&&l){ut||(ut=n.createElement("canvas"),Li=ut.getContext("2d"));const S=e,k=S.crossOrigin;S.crossOrigin="anonymous";const W=()=>{S.removeEventListener("load",W);try{ut.width=S.naturalWidth,ut.height=S.naturalHeight,Li.drawImage(S,0,0),E.rr_dataURL=ut.toDataURL(d.type,d.quality)}catch(ee){console.warn(`Cannot inline img src=${S.currentSrc}! Error: ${ee}`)}k?E.crossOrigin=k:S.removeAttribute("crossorigin")};S.complete&&S.naturalWidth!==0?W():S.addEventListener("load",W)}if((T==="audio"||T==="video")&&(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop)),N){const{width:S,height:k}=e.getBoundingClientRect();E={class:E.class,rr_width:`${S}px`,rr_height:`${k}px`}}T==="iframe"&&!h(E.src)&&(e.contentDocument||(E.rr_src=E.src),delete E.src);let H;try{customElements.get(T)&&(H=!0)}catch{}return{type:re.Element,tagName:T,attributes:E,childNodes:[],isSVG:Pp(e)||void 0,needBlock:N,rootId:g,isCustom:H}}function q(e){return e==null?"":e.toLowerCase()}function qp(e,t){if(t.comment&&e.type===re.Comment)return!0;if(e.type===re.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(q(e.attributes.name).match(/^msapplication-tile(image|color)$/)||q(e.attributes.name)==="application-name"||q(e.attributes.rel)==="icon"||q(e.attributes.rel)==="apple-touch-icon"||q(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&q(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(q(e.attributes.property).match(/^(og|twitter|fb):/)||q(e.attributes.name).match(/^(og|twitter):/)||q(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(q(e.attributes.name)==="robots"||q(e.attributes.name)==="googlebot"||q(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(q(e.attributes.name)==="author"||q(e.attributes.name)==="generator"||q(e.attributes.name)==="framework"||q(e.attributes.name)==="publisher"||q(e.attributes.name)==="progid"||q(e.attributes.property).match(/^article:/)||q(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(q(e.attributes.name)==="google-site-verification"||q(e.attributes.name)==="yandex-verification"||q(e.attributes.name)==="csrf-token"||q(e.attributes.name)==="p:domain_verify"||q(e.attributes.name)==="verify-v1"||q(e.attributes.name)==="verification"||q(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function _t(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:m={},maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I={},inlineImages:R=!1,recordCanvas:N=!1,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:O=5e3,onStylesheetLoad:H,stylesheetLoadTimeout:S=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:W=!1}=t;let{preserveWhiteSpace:ee=!0}=t;const X=Up(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,dataURLOptions:I,inlineImages:R,recordCanvas:N,keepIframeSrcFn:k,newlyAddedElement:W});if(!X)return console.warn(e,"not serialized"),null;let de;r.hasNode(e)?de=r.getId(e):qp(X,b)||!ee&&X.type===re.Text&&!X.isStyle&&!X.textContent.replace(/^\s+|\s+$/gm,"").length?de=Jt:de=As();const U=Object.assign(X,{id:de});if(r.add(e,U),de===Jt)return null;T&&T(e);let ve=!f;if(U.type===re.Element){ve=ve&&!U.needBlock,delete U.needBlock;const J=e.shadowRoot;J&&qt(J)&&(U.isShadowHost=!0)}if((U.type===re.Document||U.type===re.Element)&&ve){b.headWhitespace&&U.type===re.Element&&U.tagName==="head"&&(ee=!1);const J={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I,inlineImages:R,recordCanvas:N,preserveWhiteSpace:ee,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:O,onStylesheetLoad:H,stylesheetLoadTimeout:S,keepIframeSrcFn:k};for(const le of Array.from(e.childNodes)){const Te=_t(le,J);Te&&U.childNodes.push(Te)}if(_p(e)&&e.shadowRoot)for(const le of Array.from(e.shadowRoot.childNodes)){const Te=_t(le,J);Te&&(qt(e.shadowRoot)&&(Te.isShadow=!0),U.childNodes.push(Te))}}return e.parentNode&&Wt(e.parentNode)&&qt(e.parentNode)&&(U.isShadow=!0),U.type===re.Element&&U.tagName==="iframe"&&Bp(e,()=>{const J=e.contentDocument;if(J&&E){const le=_t(J,{doc:J,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I,inlineImages:R,recordCanvas:N,preserveWhiteSpace:ee,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:O,onStylesheetLoad:H,stylesheetLoadTimeout:S,keepIframeSrcFn:k});le&&E(e,le)}},O),U.type===re.Element&&U.tagName==="link"&&U.attributes.rel==="stylesheet"&&Hp(e,()=>{if(H){const J=_t(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I,inlineImages:R,recordCanvas:N,preserveWhiteSpace:ee,onSerialize:T,onIframeLoad:E,iframeLoadTimeout:O,onStylesheetLoad:H,stylesheetLoadTimeout:S,keepIframeSrcFn:k});J&&H(e,J)}},S),U}function Gp(e,t){const{mirror:n=new Xa,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:m=!1,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOM:b=!1,dataURLOptions:I,preserveWhiteSpace:R,onSerialize:N,onIframeLoad:T,iframeLoadTimeout:E,onStylesheetLoad:O,stylesheetLoadTimeout:H,keepIframeSrcFn:S=()=>!1}=t||{};return _t(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:g,maskTextFn:_,maskInputFn:y,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:I,inlineImages:f,recordCanvas:h,preserveWhiteSpace:R,onSerialize:N,onIframeLoad:T,iframeLoadTimeout:E,onStylesheetLoad:O,stylesheetLoadTimeout:H,keepIframeSrcFn:S,newlyAddedElement:!1})}function Pe(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}function ae(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const ft=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Pi={map:{},getId(){return console.error(ft),-1},getNode(){return console.error(ft),null},removeNodeFromMap(){console.error(ft)},has(){return console.error(ft),!1},reset(){console.error(ft)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Pi=new Proxy(Pi,{get(e,t,n){return t==="map"&&console.error(ft),Reflect.get(e,t,n)}}));function Zt(e,t,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=t-(o-s),c=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),s=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Qa(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){setTimeout(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Qa(e,t,i||{},!0)}function Ns(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let Fn=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Fn=()=>new Date().getTime());function ec(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:Pe([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||Pe([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||Pe([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:Pe([t,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||Pe([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||Pe([t,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function tc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function nc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function be(e,t,n,r,s){if(!e)return!1;const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!i)return!1;const o=gt(t,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=Xe(i,o);let c=-1;return a<0?!1:(r&&(c=Xe(i,gt(null,r))),a>-1&&c<0?!0:a<c)}function Yp(e,t){return t.getId(e)!==-1}function gr(e,t){return t.getId(e)===Jt}function rc(e,t){if(Wt(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?rc(e.parentNode,t):!0:!0}function qr(e){return!!e.changedTouches}function Vp(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function sc(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function ic(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Gr(e){return!!Pe([e,"optionalAccess",t=>t.shadowRoot])}class Kp{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return cl(this.styleIDMap.get(t),()=>-1)}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function oc(e){let t=null;return Pe([e,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Xp(e){let t=e,n;for(;n=oc(t);)t=n;return t}function Jp(e){const t=e.ownerDocument;if(!t)return!1;const n=Xp(e);return t.contains(n)}function ac(e){const t=e.ownerDocument;return t?t.contains(e)||Jp(e):!1}let _r;function Zp(){if(_r)return _r;const e=window.document;let t=window.requestAnimationFrame;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(t=r.requestAnimationFrame),e.head.removeChild(n)}catch{}return _r=t.bind(window)}function Qp(...e){return Zp()(...e)}var x=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(x||{}),M=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(M||{}),ie=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ie||{}),Oe=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Oe||{});function em(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}function Fi(e){return"__ln"in e}class tm{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=em([n,"optionalAccess",s=>s.next])||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Fi(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Fi(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const $i=(e,t)=>`${e}@${t}`;class nm{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new tm,s=c=>{let u=c,d=Jt;for(;d===Jt;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!ac(c))return;const u=Wt(c.parentNode)?this.mirror.getId(oc(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=_t(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{sc(f,this.mirror)&&this.iframeManager.addIframe(f),ic(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Gr(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,h)=>{this.iframeManager.attachIframe(f,h),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,h)=>{this.stylesheetManager.attachLinkElement(f,h)}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Bi(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Hi(this.droppedSet,c)&&!Bi(this.removes,c,this.mirror)||Hi(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),d=s(o.value);u!==-1&&d!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const h=d.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const m=h.parentNode.host;if(this.mirror.getId(m)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(gr(t.target,this.mirror))return;let n;try{n=document.implementation.createHTMLDocument()}catch{n=this.doc}switch(t.type){case"characterData":{const r=t.target.textContent;!be(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:Ct(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let s=t.attributeName,i=t.target.getAttribute(s);if(s==="value"){const a=Ms(r),c=r.tagName;i=Ln(r,c,a);const u=tr({maskInputOptions:this.maskInputOptions,tagName:c,type:a}),d=Ct(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,u);i=Xt({isMasked:d,element:r,value:i,maskInputFn:this.maskInputFn})}if(be(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===t.oldValue)return;let o=this.attributes.find(a=>a.node===t.target);if(r.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(i))if(!r.contentDocument)s="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),s==="type"&&r.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!Za(r.tagName,s)&&(o.attributes[s]=Ja(this.doc,Rt(r.tagName),Rt(s),i,r,this.maskAttributeFn),s==="style")){const a=n.createElement("span");t.oldValue&&a.setAttribute("style",t.oldValue);for(const c of Array.from(r.style)){const u=r.style.getPropertyValue(c),d=r.style.getPropertyPriority(c);u!==a.style.getPropertyValue(c)||d!==a.style.getPropertyPriority(c)?d===""?o.styleDiff[c]=u:o.styleDiff[c]=[u,d]:o._unchangedStyles[c]=[u,d]}for(const c of Array.from(a.style))r.style.getPropertyValue(c)===""&&(o.styleDiff[c]=!1)}break}case"childList":{if(be(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const s=this.mirror.getId(r),i=Wt(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);be(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||gr(r,this.mirror)||!Yp(r,this.mirror)||(this.addedSet.has(r)?(Yr(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&s===-1||rc(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[$i(s,i)]?Yr(this.movedSet,r):this.removes.push({parentId:i,id:s,isShadow:Wt(t.target)&&qt(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(gr(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[$i(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);be(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),Gr(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Yr(e,t){e.delete(t),t.childNodes.forEach(n=>Yr(e,n))}function Bi(e,t,n){return e.length===0?!1:cc(e,t,n)}function cc(e,t,n){const{parentNode:r}=t;if(!r)return!1;const s=n.getId(r);return e.some(i=>i.id===s)?!0:cc(e,r,n)}function Hi(e,t){return e.size===0?!1:uc(e,t)}function uc(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:uc(e,n):!1}let Gt;function rm(e){Gt=e}function sm(){Gt=void 0}const D=e=>Gt?(...n)=>{try{return e(...n)}catch(r){if(Gt&&Gt(r)===!0)return()=>{};throw r}}:e;function Re(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}const yt=[];function cn(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function lc(e,t){const n=new nm;yt.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=Re([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);s&&window[s]&&(r=window[s]);const i=new r(D(o=>{e.onMutation&&e.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function im({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],a;const c=Zt(D(l=>{const f=Date.now()-a;e(o.map(h=>(h.timeOffset-=f,h)),l),o=[],a=null}),i),u=D(Zt(D(l=>{const f=cn(l),{clientX:h,clientY:m}=qr(l)?l.changedTouches[0]:l;a||(a=Fn()),o.push({x:h,y:m,id:r.getId(f),timeOffset:Fn()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?M.Drag:l instanceof MouseEvent?M.MouseMove:M.TouchMove)}),s,{trailing:!1})),d=[ae("mousemove",u,n),ae("touchmove",u,n),ae("drag",u,n)];return D(()=>{d.forEach(l=>l())})}function om({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const d=l=>f=>{const h=cn(f);if(be(h,r,s,i,!0))return;let m=null,g=l;if("pointerType"in f){switch(f.pointerType){case"mouse":m=Oe.Mouse;break;case"touch":m=Oe.Touch;break;case"pen":m=Oe.Pen;break}m===Oe.Touch?ie[l]===ie.MouseDown?g="TouchStart":ie[l]===ie.MouseUp&&(g="TouchEnd"):Oe.Pen}else qr(f)&&(m=Oe.Touch);m!==null?(u=m,(g.startsWith("Touch")&&m===Oe.Touch||g.startsWith("Mouse")&&m===Oe.Mouse)&&(m=null)):ie[l]===ie.Click&&(m=u,u=null);const _=qr(f)?f.changedTouches[0]:f;if(!_)return;const y=n.getId(h),{clientX:b,clientY:I}=_;D(e)({type:ie[g],id:y,x:b,y:I,...m!==null&&{pointerType:m}})};return Object.keys(ie).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Rt(l);const h=d(l);if(window.PointerEvent)switch(ie[l]){case ie.MouseDown:case ie.MouseUp:f=f.replace("mouse","pointer");break;case ie.TouchStart:case ie.TouchEnd:return}c.push(ae(f,h,t))}),D(()=>{c.forEach(l=>l())})}function dc({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=D(Zt(D(c=>{const u=cn(c);if(!u||be(u,r,s,i,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=ec(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return ae("scroll",a,t)}function am({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=D(Zt(D(()=>{const i=tc(),o=nc();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return ae("resize",s,t)}const cm=["INPUT","TEXTAREA","SELECT"],Ui=new WeakMap;function um({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:h,maskTextSelector:m,unmaskTextSelector:g}){function _(E){let O=cn(E);const H=E.isTrusted,S=O&&Wr(O.tagName);if(S==="OPTION"&&(O=O.parentElement),!O||!S||cm.indexOf(S)<0||be(O,r,s,i,!0))return;const k=O;if(k.classList.contains(o)||a&&k.matches(a))return;const W=Ms(O);let ee=Ln(k,S,W),X=!1;const de=tr({maskInputOptions:c,tagName:S,type:W}),U=Ct(O,f,m,h,g,de);(W==="radio"||W==="checkbox")&&(X=O.checked),ee=Xt({isMasked:U,element:O,value:ee,maskInputFn:u}),y(O,l?{text:ee,isChecked:X,userTriggered:H}:{text:ee,isChecked:X});const ve=O.name;W==="radio"&&ve&&X&&t.querySelectorAll(`input[type="radio"][name="${ve}"]`).forEach(J=>{if(J!==O){const le=Xt({isMasked:U,element:J,value:Ln(J,S,W),maskInputFn:u});y(J,l?{text:le,isChecked:!X,userTriggered:!1}:{text:le,isChecked:!X})}})}function y(E,O){const H=Ui.get(E);if(!H||H.text!==O.text||H.isChecked!==O.isChecked){Ui.set(E,O);const S=n.getId(E);D(e)({...O,id:S})}}const I=(d.input==="last"?["change"]:["input","change"]).map(E=>ae(E,D(_),t)),R=t.defaultView;if(!R)return()=>{I.forEach(E=>E())};const N=R.Object.getOwnPropertyDescriptor(R.HTMLInputElement.prototype,"value"),T=[[R.HTMLInputElement.prototype,"value"],[R.HTMLInputElement.prototype,"checked"],[R.HTMLSelectElement.prototype,"value"],[R.HTMLTextAreaElement.prototype,"value"],[R.HTMLSelectElement.prototype,"selectedIndex"],[R.HTMLOptionElement.prototype,"selected"]];return N&&N.set&&I.push(...T.map(E=>Qa(E[0],E[1],{set(){D(_)({target:this,isTrusted:!1})}},!1,R))),D(()=>{I.forEach(E=>E())})}function $n(e){const t=[];function n(r,s){if(En("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||En("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||En("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||En("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(e,t)}function Fe(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function lm({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:D((d,l,f)=>{const[h,m]=f,{id:g,styleId:_}=Fe(l,t,n.styleMirror);return(g&&g!==-1||_&&_!==-1)&&e({id:g,styleId:_,adds:[{rule:h,index:m}]}),d.apply(l,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:D((d,l,f)=>{const[h]=f,{id:m,styleId:g}=Fe(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,removes:[{index:h}]}),d.apply(l,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:D((d,l,f)=>{const[h]=f,{id:m,styleId:g}=Fe(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replace:h}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:D((d,l,f)=>{const[h]=f,{id:m,styleId:g}=Fe(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,replaceSync:h}),d.apply(l,f)})}));const c={};vn("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(vn("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),vn("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),vn("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:D((f,h,m)=>{const[g,_]=m,{id:y,styleId:b}=Fe(h.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,adds:[{rule:g,index:[...$n(h),_||0]}]}),f.apply(h,m)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:D((f,h,m)=>{const[g]=m,{id:_,styleId:y}=Fe(h.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||y&&y!==-1)&&e({id:_,styleId:y,removes:[{index:[...$n(h),g]}]}),f.apply(h,m)})})}),D(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function fc({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?Re([n,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):Re([n,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),i=Re([s,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(Re([s,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Re([i,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=Re([i,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,o)]);if(r!==null&&r!==-1)try{t.adoptStyleSheets(o,r)}catch{}return a}}),D(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function dm({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:D((a,c,u)=>{const[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);const{id:h,styleId:m}=Fe(Re([c,"access",g=>g.parentRule,"optionalAccess",g=>g.parentStyleSheet]),t,r.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,set:{property:d,value:l,priority:f},index:$n(c.parentRule)}),a.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:D((a,c,u)=>{const[d]=u;if(n.has(d))return o.apply(c,[d]);const{id:l,styleId:f}=Fe(Re([c,"access",h=>h.parentRule,"optionalAccess",h=>h.parentStyleSheet]),t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:$n(c.parentRule)}),a.apply(c,u)})}),D(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function fm({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=D(u=>Zt(D(d=>{const l=cn(d);if(!l||be(l,t,n,r,!0))return;const{currentTime:f,volume:h,muted:m,playbackRate:g}=l;e({type:u,id:s.getId(l),currentTime:f,volume:h,muted:m,playbackRate:g})}),i.media||500)),c=[ae("play",a(0),o),ae("pause",a(1),o),ae("seeked",a(2),o),ae("volumechange",a(3),o),ae("ratechange",a(4),o)];return D(()=>{c.forEach(u=>u())})}function hm({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){const l=new i(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const o=Ns(t.fonts,"add",function(a){return function(c){return setTimeout(D(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),D(()=>{r.forEach(a=>a())})}function pm(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=D(()=>{const u=t.getSelection();if(!u||a&&Re([u,"optionalAccess",f=>f.isCollapsed]))return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const h=u.getRangeAt(f),{startContainer:m,startOffset:g,endContainer:_,endOffset:y}=h;be(m,r,s,i,!0)||be(_,r,s,i,!0)||d.push({start:n.getId(m),startOffset:g,end:n.getId(_),endOffset:y})}o({ranges:d})});return c(),ae("selectionchange",c)}function mm({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Ns(n.customElements,"define",function(s){return function(i,o,a){try{t({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function gm(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=lc(e,e.doc),s=im(e),i=om(e),o=dc(e),a=am(e,{win:n}),c=um(e),u=fm(e),d=lm(e,{win:n}),l=fc(e,e.doc),f=dm(e,{win:n}),h=e.collectFonts?hm(e):()=>{},m=pm(e),g=mm(e),_=[];for(const y of e.plugins)_.push(y.observer(y.callback,n,y.options));return D(()=>{yt.forEach(y=>y.reset()),r.disconnect(),s(),i(),o(),a(),c(),u(),d(),l(),f(),h(),m(),g(),_.forEach(y=>y())})}function En(e){return typeof window[e]<"u"}function vn(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Vr{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const i=r||this.getIdToRemoteIdMap(t),o=s||this.getRemoteIdToIdMap(t);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}function ji(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],i=e[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(t,...o)),t=void 0)}return n}class _m{constructor(){this.crossOriginIframeMirror=new Vr(As),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class ym{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Vr(As),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Vr(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),ji([this,"access",r=>r.loadListener,"optionalCall",r=>r(t)]),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case x.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:x.IncrementalSnapshot,data:{source:M.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case x.Meta:case x.Load:case x.DomContentLoaded:return!1;case x.Plugin:return n;case x.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case x.IncrementalSnapshot:switch(n.data.source){case M.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case M.Drag:case M.TouchMove:case M.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case M.ViewportResize:return!1;case M.MediaInteraction:case M.MouseInteraction:case M.Scroll:case M.CanvasMutation:case M.Input:return this.replaceIds(n.data,t,["id"]),n;case M.StyleSheetRule:case M.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case M.Font:return n;case M.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case M.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),ji([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(s=>{this.replaceStyleIds(s,t,["styleId"])})]),n}}return!1}replace(t,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==re.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Sm{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class bm{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!qt(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=lc({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(dc({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(fc({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Ns(t.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&ac(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class Em{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}}class vm{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Kp,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Ka(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Tm{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Qp(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function te(e){const t=e;return t.timestamp=Fn(),t}let Kr,Bn;const Se=Tp();function je(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:h=null,inlineStylesheet:m=!0,maskAllInputs:g,maskInputOptions:_,slimDOMOptions:y,maskAttributeFn:b,maskInputFn:I,maskTextFn:R,packFn:N,sampling:T={},dataURLOptions:E={},mousemoveWait:O,recordCanvas:H=!1,recordCrossOriginIframes:S=!1,recordAfter:k=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:W=!1,collectFonts:ee=!1,inlineImages:X=!1,plugins:de,keepIframeSrcFn:U=()=>!1,ignoreCSSAttributes:ve=new Set([]),errorHandler:J,onMutation:le,getCanvasManager:Te}=e;rm(J);const Ft=S?window.parent===window:!0;let qe=!1;if(!Ft)try{window.parent.document&&(qe=!1)}catch{qe=!0}if(Ft&&!t)throw new Error("emit function is required");O!==void 0&&T.mousemove===void 0&&(T.mousemove=O),Se.reset();const Ge=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},at=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};Vp();let ln,ir=0;const js=C=>{for(const _e of de||[])_e.eventProcessor&&(C=_e.eventProcessor(C));return N&&!qe&&(C=N(C)),C},Z=(C,_e)=>{if(lr([yt,"access",P=>P[0],"optionalAccess",P=>P.isFrozen,"call",P=>P()])&&C.type!==x.FullSnapshot&&!(C.type===x.IncrementalSnapshot&&C.data.source===M.Mutation)&&yt.forEach(P=>P.unfreeze()),Ft)lr([t,"optionalCall",P=>P(js(C),_e)]);else if(qe){const P={type:"rrweb",event:js(C),origin:window.location.origin,isCheckout:_e};window.parent.postMessage(P,"*")}if(C.type===x.FullSnapshot)ln=C,ir=0;else if(C.type===x.IncrementalSnapshot){if(C.data.source===M.Mutation&&C.data.isAttachIframe)return;ir++;const P=r&&ir>=r,ye=n&&C.timestamp-ln.timestamp>n;(P||ye)&&ar(!0)}};Kr=Z;const dn=C=>{Z(te({type:x.IncrementalSnapshot,data:{source:M.Mutation,...C}}))},zs=C=>Z(te({type:x.IncrementalSnapshot,data:{source:M.Scroll,...C}})),Kc=C=>Z(te({type:x.IncrementalSnapshot,data:{source:M.CanvasMutation,...C}})),Xc=C=>Z(te({type:x.IncrementalSnapshot,data:{source:M.AdoptedStyleSheet,...C}})),Ye=new vm({mutationCb:dn,adoptedStyleSheetCb:Xc}),Ve=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new _m:new ym({mirror:Se,mutationCb:dn,stylesheetManager:Ye,recordCrossOriginIframes:S,wrappedEmit:Z});for(const C of de||[])C.getMirror&&C.getMirror({nodeMirror:Se,crossOriginIframeMirror:Ve.crossOriginIframeMirror,crossOriginIframeStyleMirror:Ve.crossOriginIframeStyleMirror});const or=new Tm,Ws=Im(Te,{recordCanvas:H,blockClass:s,blockSelector:i,unblockSelector:o,sampling:T.canvas,dataURLOptions:E}),fn=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Sm:new bm({mutationCb:dn,scrollCb:zs,bypassOptions:{onMutation:le,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:m,maskInputOptions:Ge,dataURLOptions:E,maskAttributeFn:b,maskTextFn:R,maskInputFn:I,recordCanvas:H,inlineImages:X,sampling:T,slimDOMOptions:at,iframeManager:Ve,stylesheetManager:Ye,canvasManager:Ws,keepIframeSrcFn:U,processedNodeManager:or},mirror:Se}),ar=(C=!1)=>{Z(te({type:x.Meta,data:{href:window.location.href,width:nc(),height:tc()}}),C),Ye.reset(),fn.init(),yt.forEach(P=>P.lock());const _e=Gp(document,{mirror:Se,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:m,maskAllInputs:Ge,maskAttributeFn:b,maskInputFn:I,maskTextFn:R,slimDOM:at,dataURLOptions:E,recordCanvas:H,inlineImages:X,onSerialize:P=>{sc(P,Se)&&Ve.addIframe(P),ic(P,Se)&&Ye.trackLinkElement(P),Gr(P)&&fn.addShadowRoot(P.shadowRoot,document)},onIframeLoad:(P,ye)=>{Ve.attachIframe(P,ye),fn.observeAttachShadow(P)},onStylesheetLoad:(P,ye)=>{Ye.attachLinkElement(P,ye)},keepIframeSrcFn:U});if(!_e)return console.warn("Failed to snapshot the document");Z(te({type:x.FullSnapshot,data:{node:_e,initialOffset:ec(window)}})),yt.forEach(P=>P.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ye.adoptStyleSheets(document.adoptedStyleSheets,Se.getId(document))};Bn=ar;try{const C=[],_e=ye=>D(gm)({onMutation:le,mutationCb:dn,mousemoveCb:($,Ke)=>Z(te({type:x.IncrementalSnapshot,data:{source:Ke,positions:$}})),mouseInteractionCb:$=>Z(te({type:x.IncrementalSnapshot,data:{source:M.MouseInteraction,...$}})),scrollCb:zs,viewportResizeCb:$=>Z(te({type:x.IncrementalSnapshot,data:{source:M.ViewportResize,...$}})),inputCb:$=>Z(te({type:x.IncrementalSnapshot,data:{source:M.Input,...$}})),mediaInteractionCb:$=>Z(te({type:x.IncrementalSnapshot,data:{source:M.MediaInteraction,...$}})),styleSheetRuleCb:$=>Z(te({type:x.IncrementalSnapshot,data:{source:M.StyleSheetRule,...$}})),styleDeclarationCb:$=>Z(te({type:x.IncrementalSnapshot,data:{source:M.StyleDeclaration,...$}})),canvasMutationCb:Kc,fontCb:$=>Z(te({type:x.IncrementalSnapshot,data:{source:M.Font,...$}})),selectionCb:$=>{Z(te({type:x.IncrementalSnapshot,data:{source:M.Selection,...$}}))},customElementCb:$=>{Z(te({type:x.IncrementalSnapshot,data:{source:M.CustomElement,...$}}))},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:h,maskInputOptions:Ge,inlineStylesheet:m,sampling:T,recordCanvas:H,inlineImages:X,userTriggeredOnInput:W,collectFonts:ee,doc:ye,maskAttributeFn:b,maskInputFn:I,maskTextFn:R,keepIframeSrcFn:U,blockSelector:i,unblockSelector:o,slimDOMOptions:at,dataURLOptions:E,mirror:Se,iframeManager:Ve,stylesheetManager:Ye,shadowDomManager:fn,processedNodeManager:or,canvasManager:Ws,ignoreCSSAttributes:ve,plugins:lr([de,"optionalAccess",$=>$.filter,"call",$=>$(Ke=>Ke.observer),"optionalAccess",$=>$.map,"call",$=>$(Ke=>({observer:Ke.observer,options:Ke.options,callback:Jc=>Z(te({type:x.Plugin,data:{plugin:Ke.name,payload:Jc}}))}))])||[]},{});Ve.addLoadListener(ye=>{try{C.push(_e(ye.contentDocument))}catch($){console.warn($)}});const P=()=>{ar(),C.push(_e(document))};return document.readyState==="interactive"||document.readyState==="complete"?P():(C.push(ae("DOMContentLoaded",()=>{Z(te({type:x.DomContentLoaded,data:{}})),k==="DOMContentLoaded"&&P()})),C.push(ae("load",()=>{Z(te({type:x.Load,data:{}})),k==="load"&&P()},window))),()=>{C.forEach(ye=>ye()),or.destroy(),Bn=void 0,sm()}}catch(C){console.warn(C)}}function wm(e){if(!Bn)throw new Error("please take full snapshot after start recording");Bn(e)}function km(e){Kr&&Kr(e)}je.mirror=Se;je.takeFullSnapshot=wm;function Im(e,t){return e?e({...t,mirror:Se,win:window,mutationCb:n=>km(te({type:x.IncrementalSnapshot,data:{source:M.CanvasMutation,...n}}))}):new Em}const Rm=3,Cm=5;function Ds(e){return e>9999999999?e:e*1e3}function yr(e){return e>9999999999?e/1e3:e}function un(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:x.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Ie(t,10,1e3)}}),t.category==="console")))}const xm="button,a";function hc(e){return e.closest(xm)||e}function pc(e){const t=mc(e);return!t||!(t instanceof Element)?t:hc(t)}function mc(e){return Mm(e)?e.target:e}function Mm(e){return typeof e=="object"&&!!e&&"target"in e}let $e;function Am(e){return $e||($e=[],Om()),$e.push(e),()=>{const t=$e?$e.indexOf(e):-1;t>-1&&$e.splice(t,1)}}function Om(){se(G,"open",function(e){return function(...t){if($e)try{$e.forEach(n=>n())}catch{}return e.apply(G,t)}})}function Nm(e,t,n){e.handleClick(t,n)}class Dm{constructor(t,n,r=un){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=Am(()=>{this._lastMutation=zi()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(Pm(n,this._ignoreSelector)||!Fm(t))return;const r={timestamp:yr(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=yr(t)}registerScroll(t=Date.now()){this._lastScroll=yr(t)}registerClick(t){const n=hc(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=zi();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:G.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,d);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:G.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const Lm=["A","BUTTON","INPUT"];function Pm(e,t){return!!(!Lm.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function Fm(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function zi(){return Date.now()/1e3}function $m(e,t){try{if(!Bm(t))return;const{source:n}=t.data;if(n===M.Mutation&&e.registerMutation(t.timestamp),n===M.Scroll&&e.registerScroll(t.timestamp),Hm(t)){const{type:r,id:s}=t.data,i=je.mirror.getNode(s);i instanceof HTMLElement&&r===ie.Click&&e.registerClick(i)}}catch{}}function Bm(e){return e.type===Rm}function Hm(e){return e.data.source===M.MouseInteraction}function Me(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Hn;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(Hn||(Hn={}));const Um=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function jm(e){const t={};for(const n in e)if(Um.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const zm=e=>t=>{if(!e.isEnabled())return;const n=Wm(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&Nm(e.clickDetector,n,pc(t.event)),un(e,n)};function gc(e,t){const n=je.mirror.getId(e),r=n&&je.mirror.getNode(n),s=r&&je.mirror.getMeta(r),i=s&&Gm(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===Hn.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:jm(i.attributes)}}:{}}}function Wm(e){const{target:t,message:n}=qm(e);return Me({category:`ui.${e.name}`,...gc(t,n)})}function qm(e){const t=e.name==="click";let n,r=null;try{r=t?pc(e.event):mc(e.event),n=Ze(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function Gm(e){return e.type===Hn.Element}function Ym(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=Vm(t);n&&un(e,n)}function Vm(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=e;if(!o||Km(o)||!i)return null;const a=t||r||s,c=i.length===1;if(!a&&c)return null;const u=Ze(o,{maxStringLength:200})||"<unknown>",d=gc(o,u);return Me({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function Km(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const Wi={resource:eg,paint:Zm,navigation:Qm};function Xm(e){return e.map(Jm).filter(Boolean)}function Jm(e){return Wi[e.entryType]?Wi[e.entryType](e):null}function xt(e){return((pe||G.performance.timeOrigin)+e)/1e3}function Zm(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=xt(s);return{type:n,name:r,start:i,end:i+t,data:void 0}}function Qm(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:h,transferSize:m,type:g}=e;return s===0?null:{type:`${t}.${g}`,start:xt(h),end:xt(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function eg(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:xt(i),end:xt(s),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function tg(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,s=e.value,i=xt(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:s,size:s,nodeId:r?je.mirror.getId(r):void 0}}}function ng(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Qn(s,n))}),r.push(qa(({metric:s})=>{e.replayPerformanceEntries.push(tg(s))})),()=>{r.forEach(s=>s())}}const z=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,rg='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function sg(){const e=new Blob([rg]);return URL.createObjectURL(e)}function oe(e,t){z&&(p.info(e),t&&_c(e))}function vt(e,t){z&&(p.info(e),t&&setTimeout(()=>{_c(e)},0))}function _c(e){We({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Ls extends Error{constructor(){super(`Event buffer exceeded maximum size of ${xs}.`)}}class yc{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>xs)throw new Ls;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Ds(t):null}}class ig{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){oe("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){z&&p.error("[Replay]",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class og{constructor(t){this._worker=new ig(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Ds(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>xs?Promise.reject(new Ls):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{z&&p.warn('[Replay] Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class ag{constructor(t){this._fallback=new yc,this._compression=new og(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{oe("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n}=this._fallback,r=[];for(const s of t)r.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(s){z&&p.warn("[Replay] Failed to add events when switching buffers.",s)}}}function cg({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=ug(t);if(n)return n}return oe("[Replay] Using simple buffer"),new yc}function ug(e){try{const t=e||lg();if(!t)return;oe(`[Replay] Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new ag(n)}catch{oe("[Replay] Failed to create compression worker")}}function lg(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?sg():""}function Ps(){try{return"sessionStorage"in G&&!!G.sessionStorage}catch{return!1}}function dg(e){fg(),e.session=void 0}function fg(){if(Ps())try{G.sessionStorage.removeItem(Rs)}catch{}}function Sc(e){return e===void 0?!1:Math.random()<e}function bc(e){const t=Date.now(),n=e.id||Q(),r=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a}}function Fs(e){if(Ps())try{G.sessionStorage.setItem(Rs,JSON.stringify(e))}catch{}}function hg(e,t){return Sc(e)?"session":t?"buffer":!1}function qi({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=hg(e,t),i=bc({sampled:s,previousSessionId:r});return n&&Fs(i),i}function pg(e){if(!Ps())return null;try{const t=G.sessionStorage.getItem(Rs);if(!t)return null;const n=JSON.parse(t);return vt("[Replay] Loading existing session",e),bc(n)}catch{return null}}function Xr(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Ec(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Xr(e.started,t,r)||Xr(e.lastActivity,n,r)}function vc(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Ec(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Sr({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},s){const i=s.stickySession&&pg(e);return i?vc(i,{sessionIdleExpire:t,maxReplayDuration:n})?(vt("[Replay] Session in sessionStorage is expired, creating new one..."),qi(s,{previousSessionId:i.id})):i:(vt("[Replay] Creating new session",e),qi(s,{previousSessionId:r}))}function mg(e){return e.type===x.Custom}function $s(e,t,n){return wc(e,t)?(Tc(e,t,n),!0):!1}function gg(e,t,n){return wc(e,t)?Tc(e,t,n):Promise.resolve(null)}async function Tc(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=e.getOptions(),s=_g(t,r.beforeAddRecordingEvent);return s?await e.eventBuffer.addEvent(s):void 0}catch(r){const s=r&&r instanceof Ls?"addEventSizeExceeded":"addEvent";z&&p.error(r),await e.stop({reason:s});const i=F();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function wc(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Ds(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(oe(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1):!0}function _g(e,t){try{if(typeof t=="function"&&mg(e))return t(e)}catch(n){return z&&p.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}function Bs(e){return!e.type}function Jr(e){return e.type==="transaction"}function yg(e){return e.type==="replay_event"}function Gi(e){return e.type==="feedback"}function kc(e){const t=Eg();return(n,r)=>{if(!e.isEnabled()||!Bs(n)&&!Jr(n))return;const s=r&&r.statusCode;if(!(t&&(!s||s<200||s>=300))){if(Jr(n)){Sg(e,n);return}bg(e,n)}}}function Sg(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function bg(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||setTimeout(()=>{e.sendBufferedReplayOrFlush()})}function Eg(){const e=F();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}function vg(e){return t=>{!e.isEnabled()||!Bs(t)||Tg(e,t)}}function Tg(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Me({category:"replay.hydrate-error"});un(e,r)}}function wg(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function kg(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:x.Custom,timestamp:t.timestamp*1e3,data:{timestamp:t.timestamp,tag:"breadcrumb",payload:{category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function Ig(e,t){return e.recordingMode!=="buffer"||t.message===Cs||!t.exception||t.type?!1:Sc(e.getOptions().errorSampleRate)}function Rg(e,t=!1){const n=t?kc(e):void 0;return Object.assign((r,s)=>e.isEnabled()?yg(r)?(delete r.breadcrumbs,r):!Bs(r)&&!Jr(r)&&!Gi(r)||!e.checkAndHandleExpiredSession()?r:Gi(r)?(e.flush(),r.contexts.feedback.replay_id=e.getSessionId(),kg(e,r),r):wg(r,s)&&!e.getOptions()._experiments.captureExceptions?(z&&p.log("[Replay] Ignoring error from rrweb internals",r),null):((Ig(e,r)||e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function nr(e,t){return t.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=e.throttledAddEvent({type:x.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function Cg(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function xg(e){return t=>{if(!e.isEnabled())return;const n=Cg(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(nr(e,[n]),!1)))}}function Mg(e,t){return z&&e.getOptions()._experiments.traceInternals?!1:Ud(t,F())}function rr(e,t){e.isEnabled()&&t!==null&&(Mg(e,t.name)||e.addUpdate(()=>(nr(e,[t]),!0)))}function Ag(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:s}=e;if(!n)return null;const{method:i,url:o}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:i,statusCode:s?s.status:void 0}}}function Og(e){return t=>{if(!e.isEnabled())return;const n=Ag(t);rr(e,n)}}function Ng(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,s=r[Ue];if(!t||!n||!s)return null;const{method:i,url:o,status_code:a}=s;return o===void 0?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:i,statusCode:a}}}function Dg(e){return t=>{if(!e.isEnabled())return;const n=Ng(t);rr(e,n)}}function sr(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=xc(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Ic(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Rc(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[xc(e)];if(!e)return[void 0]}catch{return z&&p.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return z&&p.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Un(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Cc(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:me({method:i,statusCode:o,request:a,response:c})}}function Qt(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ze(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=Lg(n);return r.body=s,i&&i.length>0&&(r._meta={warnings:i}),r}function Zr(e,t){return Object.keys(e).reduce((n,r)=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=e[r]),n},{})}function xc(e){return new URLSearchParams(e).toString()}function Lg(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Ai,n=Pg(e);if(t){const r=e.slice(0,Ai);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function Pg(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function jn(e,t){const n=Fg(e);return At(n,t)}function Fg(e,t=G.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(G.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function $g(e,t,n){try{const r=await Hg(e,t,n),s=Cc("resource.fetch",r);rr(n.replay,s)}catch(r){z&&p.error("[Replay] Failed to capture fetch breadcrumb",r)}}function Bg(e,t,n){const{input:r,response:s}=t,i=r?Mc(r):void 0,o=sr(i,n.textEncoder),a=s?Ic(s.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),a!==void 0&&(e.data.response_body_size=a)}async function Hg(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=t,{url:o,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=jn(o,n.networkDetailAllowUrls)&&!jn(o,n.networkDetailDenyUrls),f=l?Ug(n,t.input,u):Qt(u),h=await jg(l,n,t.response,d);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:c,request:f,response:h}}function Ug({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?qg(n,t):{};if(!e)return ze(s,r,void 0);const i=Mc(n),[o,a]=Rc(i),c=ze(s,r,o);return a?Un(c,a):c}async function jg(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},s,i){if(!e&&i!==void 0)return Qt(i);const o=s?Ac(s.headers,r):{};if(!s||!t&&i!==void 0)return ze(o,i,void 0);const[a,c]=await Wg(s),u=zg(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:o});return c?Un(u,c):u}function zg(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:s,headers:i}){try{const o=e&&e.length&&r===void 0?sr(e,n):r;return s?t?ze(i,o,e):ze(i,o,void 0):Qt(o)}catch(o){return z&&p.warn("[Replay] Failed to serialize response body",o),ze(i,r,void 0)}}async function Wg(e){const t=Gg(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await Yg(t)]}catch(n){return z&&p.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function Mc(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function Ac(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function qg(e,t){return e.length===1&&typeof e[0]!="string"?Yi(e[0],t):e.length===2?Yi(e[1],t):{}}function Yi(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Ac(n,t):Array.isArray(n)?{}:Zr(n,t):{}}function Gg(e){try{return e.clone()}catch(t){z&&p.warn("[Replay] Failed to clone response body",t)}}function Yg(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);Vg(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function Vg(e){return await e.text()}async function Kg(e,t,n){try{const r=Jg(e,t,n),s=Cc("resource.xhr",r);rr(n.replay,s)}catch(r){z&&p.error("[Replay] Failed to capture xhr breadcrumb",r)}}function Xg(e,t,n){const{xhr:r,input:s}=t;if(!r)return;const i=sr(s,n.textEncoder),o=r.getResponseHeader("content-length")?Ic(r.getResponseHeader("content-length")):t_(r.response,r.responseType,n.textEncoder);i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}function Jg(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!jn(c,n.networkDetailAllowUrls)||jn(c,n.networkDetailDenyUrls)){const T=Qt(l),E=Qt(f);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:T,response:E}}const h=a[Ue],m=h?Zr(h.request_headers,n.networkRequestHeaders):{},g=Zr(Zg(a),n.networkResponseHeaders),[_,y]=n.networkCaptureBodies?Rc(o):[void 0],[b,I]=n.networkCaptureBodies?Qg(a):[void 0],R=ze(m,l,_),N=ze(g,f,b);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:y?Un(R,y):R,response:I?Un(N,I):N}}function Zg(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s.toLowerCase()]=i,n},{}):{}}function Qg(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return e_(e.response,e.responseType)}catch(n){t.push(n)}return z&&p.warn("[Replay] Failed to get xhr response body",...t),[void 0]}function e_(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch{return z&&p.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return z&&p.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function t_(e,t,n){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return sr(r,n)}catch{return}}function n_(e){const t=F();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",(u,d)=>r_(c,u,d)):(as(Og(e)),cs(Dg(e)))}catch{}}function r_(e,t,n){if(t.data)try{s_(t)&&o_(n)&&(Xg(t,n,e),Kg(t,n,e)),i_(t)&&a_(n)&&(Bg(t,n,e),$g(t,n,e))}catch{z&&p.warn("Error when enriching network breadcrumb")}}function s_(e){return e.category==="xhr"}function i_(e){return e.category==="fetch"}function o_(e){return e&&e.xhr}function a_(e){return e&&e.response}let Vi=null;function c_(e){return!!e.category}const u_=e=>t=>{if(!e.isEnabled())return;const n=l_(t);n&&un(e,n)};function l_(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return Vi===t||!t||(Vi=t,!c_(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:t.category==="console"?d_(t):Me(t)}function d_(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return Me(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>bn?(n=!0,`${s.slice(0,bn)}…`):s;if(typeof s=="object")try{const i=Ie(s,7);return JSON.stringify(i).length>bn?(n=!0,`${JSON.stringify(i,null,2).slice(0,bn)}…`):i}catch{}return s});return Me({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function f_(e){const t=ue(),n=F();t.addScopeListener(u_(e)),Ro(zm(e)),Wn(xg(e)),n_(e);const r=Rg(e,!Ki(n));n&&n.addEventProcessor?n.addEventProcessor(r):dd(r),Ki(n)&&(n.on("beforeSendEvent",vg(e)),n.on("afterSendEvent",kc(e)),n.on("createDsc",s=>{const i=e.getSessionId();i&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=i)}),n.on("startTransaction",s=>{e.lastTransaction=s}),n.on("finishTransaction",s=>{e.lastTransaction=s}),n.on("beforeSendFeedback",(s,i)=>{const o=e.getSessionId();i&&i.includeReplay&&e.isEnabled()&&o&&(e.flush(),s.contexts&&s.contexts.feedback&&(s.contexts.feedback.replay_id=o))}))}function Ki(e){return!!(e&&e.on)}async function h_(e){try{return Promise.all(nr(e,[p_(G.performance.memory)]))}catch{return[]}}function p_(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function m_(e,t,n){let r,s,i;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function u(){return s!==void 0||i!==void 0?a():r}function d(){return s&&clearTimeout(s),s=setTimeout(a,t),o&&i===void 0&&(i=setTimeout(a,o)),r}return d.cancel=c,d.flush=u,d}function g_(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){z&&p.warn("[Replay] Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&$m(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!$s(e,n,s))return!0;if(!s)return!1;if(y_(e,s),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&(oe(`[Replay] Updating session start time to earliest event in buffer to ${new Date(i)}`,e.getOptions()._experiments.traceInternals),e.session.started=i,e.getOptions().stickySession&&Fs(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function __(e){const t=e.getOptions();return{type:x.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function y_(e,t){!t||!e.session||e.session.segmentId!==0||$s(e,__(e),!1)}function S_(e,t,n,r){return it(Fo(e,ds(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function b_({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function E_({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:s};e.emit&&e.emit("preprocessEvent",r,i);const o=await ms(e.getOptions(),r,i,t,e,Dt());if(!o)return null;o.platform=o.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},o}async function v_({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=b_({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=F(),f=ue(),h=l&&l.getTransport(),m=l&&l.getDsn();if(!l||!h||!m||!i.sampled)return;const g={type:sp,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},_=await E_({scope:f,client:l,replayId:t,event:g});if(!_){l.recordDroppedEvent("event_processor","replay",g),oe("An event processor returned `null`, will not send event.");return}delete _.sdkProcessingMetadata;const y=S_(_,o,m,l.getOptions().tunnel);let b;try{b=await h.send(y)}catch(R){const N=new Error(Cs);try{N.cause=R}catch{}throw N}if(!b)return b;if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new Oc(b.statusCode);const I=Ho({},b);if(Bo(I,"replay"))throw new Nc(I);return b}class Oc extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Nc extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function Dc(e,t={count:0,interval:lp}){const{recordingData:n,options:r}=e;if(n.length)try{return await v_(e),!0}catch(s){if(s instanceof Oc||s instanceof Nc)throw s;if(Tl("Replays",{_retryCount:t.count}),z&&r._experiments&&r._experiments.captureExceptions&&gs(s),t.count>=dp){const i=new Error(`${Cs} - max retries exceeded`);try{i.cause=s}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{setTimeout(async()=>{try{await Dc(e,t),i(!0)}catch(a){o(a)}},t.interval)})}}const Lc="__THROTTLED",T_="__SKIPPED";function w_(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=t){const d=o;return o=!0,d?T_:Lc}o=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class Be{constructor({options:t,recordingOptions:n}){Be.prototype.__init.call(this),Be.prototype.__init2.call(this),Be.prototype.__init3.call(this),Be.prototype.__init4.call(this),Be.prototype.__init5.call(this),Be.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:ip,sessionIdleExpire:op},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=m_(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=w_((o,a)=>gg(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(fp,r),timeout:r,scrollTimeout:hp,ignoreSelector:s?s.join(","):""}:void 0;i&&(this.clickDetector=new Dm(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(t),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",vt(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");vt("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const t=Sr({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");vt("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=Sr({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._options._experiments.canvas;this._stopRecording=je({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:up},emit:g_(this),onMutation:this._onMutationHandler,...t&&t.manager&&{recordCanvas:!0,getCanvasManager:t.manager,...Ni[t.quality||"medium"]||Ni.medium}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{oe(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,dg(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),oe("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),oe("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();oe("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Xr(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${G.location.pathname}${G.location.hash}${G.location.search}`,n=`${G.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===Lc){const s=Me({category:"replay.throttled"});this.addUpdate(()=>!$s(this,{type:Cm,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastTransaction||ue().getTransaction(),r=(t&&ce(t).data||{})[Et];if(!(!t||!r||!["route","custom"].includes(r)))return ce(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=cg({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){z&&p.error("[Replay]",t),z&&this._options._experiments&&this._options._experiments.captureExceptions&&gs(t)}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Sr({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return vc(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{G.document.addEventListener("visibilitychange",this._handleVisibilityChange),G.addEventListener("blur",this._handleWindowBlur),G.addEventListener("focus",this._handleWindowFocus),G.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(f_(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=ng(this)}_removeListeners(){try{G.document.removeEventListener("visibilitychange",this._handleVisibilityChange),G.removeEventListener("blur",this._handleWindowBlur),G.removeEventListener("focus",this._handleWindowFocus),G.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{G.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=Me({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=Me({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{Ym(this,t)}}_doChangeToBackgroundTasks(t){!this.session||Ec(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){oe("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:x.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=Xm(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(nr(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){z&&p.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await h_(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await Dc({replayId:t,recordingData:i,segmentId:s,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=F();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){z&&p.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){oe(`[Replay] Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),i&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&oe("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){z&&p.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Fs(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>s||i){const o=Me({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(o)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function Ht(e,t,n,r){const s=typeof r=="string"?r.split(","):[],i=[...e,...s,...t];return typeof n<"u"&&(typeof n=="string"&&i.push(`.${n}`),Qe(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),i.join(",")}function k_({mask:e,unmask:t,block:n,unblock:r,ignore:s,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:c,ignoreClass:u}){const d=['base[href="/"]'],l=Ht(e,[".sentry-mask","[data-sentry-mask]"],a,c),f=Ht(t,[".sentry-unmask","[data-sentry-unmask]"]),h={maskTextSelector:l,unmaskTextSelector:f,blockSelector:Ht(n,[".sentry-block","[data-sentry-block]",...d],i,o),unblockSelector:Ht(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Ht(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],u)};return i instanceof RegExp&&(h.blockClass=i),a instanceof RegExp&&(h.maskTextClass=a),h}function I_({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Xi='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',R_=["content-length","content-type","accept"];let Ji=!1;class Hs{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=ap,flushMaxDelay:n=cp,minReplayDuration:r=pp,maxReplayDuration:s=Oi,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},sessionSampleRate:u,errorSampleRate:d,maskAllText:l=!0,maskAllInputs:f=!0,blockAllMedia:h=!0,mutationBreadcrumbLimit:m=750,mutationLimit:g=1e4,slowClickTimeout:_=7e3,slowClickIgnoreSelectors:y=[],networkDetailAllowUrls:b=[],networkDetailDenyUrls:I=[],networkCaptureBodies:R=!0,networkRequestHeaders:N=[],networkResponseHeaders:T=[],mask:E=[],maskAttributes:O=["title","placeholder"],unmask:H=[],block:S=[],unblock:k=[],ignore:W=[],maskFn:ee,beforeAddRecordingEvent:X,beforeErrorSampling:de,blockClass:U,blockSelector:ve,maskInputOptions:J,maskTextClass:le,maskTextSelector:Te,ignoreClass:Ft}={}){this.name=Hs.id;const qe=k_({mask:E,unmask:H,block:S,unblock:k,ignore:W,blockClass:U,blockSelector:ve,maskTextClass:le,maskTextSelector:Te,ignoreClass:Ft});if(this._recordingOptions={maskAllInputs:f,maskAllText:l,maskInputOptions:{...J||{},password:!0},maskTextFn:ee,maskInputFn:ee,maskAttributeFn:(Ge,at,ln)=>I_({maskAttributes:O,maskAllText:l,privacyOptions:qe,key:Ge,value:at,el:ln}),...qe,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:Ge=>{try{Ge.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,mp),maxReplayDuration:Math.min(s,Oi),stickySession:i,sessionSampleRate:u,errorSampleRate:d,useCompression:o,workerUrl:a,blockAllMedia:h,maskAllInputs:f,maskAllText:l,mutationBreadcrumbLimit:m,mutationLimit:g,slowClickTimeout:_,slowClickIgnoreSelectors:y,networkDetailAllowUrls:b,networkDetailDenyUrls:I,networkCaptureBodies:R,networkRequestHeaders:Zi(N),networkResponseHeaders:Zi(T),beforeAddRecordingEvent:X,beforeErrorSampling:de,_experiments:c},typeof u=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${u} })`),this._initialOptions.sessionSampleRate=u),typeof d=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${d} })`),this._initialOptions.errorSampleRate=d),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Xi}`:Xi),this._isInitialized&&Or())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ji}set _isInitialized(t){Ji=t}setupOnce(){Or()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const t=C_(this._initialOptions);this._replay=new Be({options:t,recordingOptions:this._recordingOptions})}}Hs.__initStatic();function C_(e){const t=F(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...me(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&Qe(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(Qe(()=>{console.warn("SDK client is not available.")}),r)}function Zi(e){return[...R_,...e.map(t=>t.toLowerCase())]}const ot=A,br="#ffffff",Qi="inherit",Er="rgba(108, 95, 199, 1)",eo={fontFamily:"'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:br,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Er,submitBorder:Er,submitOutlineFocus:"#29232f",submitForeground:br,submitForegroundHover:br,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Qi,inputForeground:Qi,inputBorder:"var(--border)",inputOutlineFocus:Er},to={light:eo,dark:{...eo,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"}},x_="Report a Bug",M_="Cancel",A_="Send Bug Report",O_="Report a Bug",N_="your.email@example.org",D_="Email",L_="What's the bug? What did you expect?",P_="Description",F_="Your Name",$_="Name",B_="Thank you for your report!",Pc="widget",Fc="api";async function H_({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const s=await ms(e.getOptions(),n,r,t,e,Dt());return s===null?(e.recordDroppedEvent("event_processor","feedback",n),null):(s.platform=s.platform||"javascript",s)}async function U_({feedback:{message:e,email:t,name:n,source:r,url:s}},{includeReplay:i=!0}={}){const o=F(),a=o&&o.getTransport(),c=o&&o.getDsn();if(!o||!a||!c)return;const u={contexts:{feedback:{contact_email:t,name:n,message:e,url:s,source:r}},type:"feedback"};return Yn(async d=>{d.clearBreadcrumbs(),[Fc,Pc].includes(String(r))&&d.setLevel("info");const l=await H_({scope:d,client:o,event:u});if(!l)return;o.emit&&o.emit("beforeSendFeedback",l,{includeReplay:!!i});const f=ea(l,c,o.getOptions()._metadata,o.getOptions().tunnel);let h;try{h=await a.send(f)}catch(m){const g=new Error("Unable to send Feedback");try{g.cause=m}catch{}throw g}if(h){if(typeof h.statusCode=="number"&&(h.statusCode<200||h.statusCode>=300))throw new Error("Unable to send Feedback");return h}})}function j_({name:e,email:t,message:n,source:r=Fc,url:s=go()},i={}){if(!n)throw new Error("Unable to submit feedback with empty message");return U_({feedback:{name:e,email:t,message:n,url:s,source:r}},i)}const ht=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function no(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function z_(e){const t=e.createElement("style");return t.textContent=`
.widget__actor {
  line-height: 25px;

  display: flex;
  align-items: center;
  gap: 8px;

  border-radius: 12px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  padding: 12px 16px;
  text-decoration: none;
  z-index: 9000;

  color: var(--foreground);
  background-color: var(--background);
  border: var(--border);
  box-shadow: var(--box-shadow);
  opacity: 1;
  transition: opacity 0.1s ease-in-out;
}

.widget__actor:hover {
  background-color: var(--background-hover);
}

.widget__actor svg {
  width: 16px;
  height: 16px;
}

.widget__actor--hidden {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}

.widget__actor__text {
}

.feedback-icon path {
  fill: var(--foreground);
}
`,t}function W_(e){const t=e.createElement("style");return t.textContent=`
.dialog {
  line-height: 25px;
  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  position: fixed;
  inset: 0;
  z-index: 10000;
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  position: fixed;
  left: var(--left);
  right: var(--right);
  bottom: var(--bottom);
  top: var(--top);

  border: var(--border);
  border-radius: 20px;
  background-color: var(--background);
  color: var(--foreground);

  width: 320px;
  max-width: 100%;
  max-height: calc(100% - 2rem);
  display: flex;
  flex-direction: column;
  box-shadow: var(--box-shadow);
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}

.dialog__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 20px;
  font-weight: 600;
  padding: 24px 24px 0 24px;
  margin: 0;
  margin-bottom: 16px;
}

.brand-link {
  display: inline-flex;
}

.error {
  color: var(--error);
  margin-bottom: 16px;
}

.form {
  display: grid;
  overflow: auto;
  flex-direction: column;
  gap: 16px;
  padding: 0 24px 24px;
}

.form__error-container {
  color: var(--error);
}

.form__error-container--hidden {
  display: none;
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: grid;
  gap: 4px;
  align-items: center;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background-color: var(--input-background);
  box-sizing: border-box;
  border: var(--input-border);
  border-radius: 6px;
  color: var(--input-foreground);
  font-size: 14px;
  font-weight: 500;
  padding: 6px 12px;
}

.form__input:focus-visible {
  outline: 1px auto var(--input-outline-focus);
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.btn-group {
  display: grid;
  gap: 8px;
  margin-top: 8px;
}

.btn {
  line-height: inherit;
  border: var(--cancel-border);
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  padding: 6px 16px;
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  background-color: var(--submit-background);
  border-color: var(--submit-border);
  color: var(--submit-foreground);
}
.btn--primary:hover {
  background-color: var(--submit-background-hover);
  color: var(--submit-foreground-hover);
}
.btn--primary:focus-visible {
  outline: 1px auto var(--submit-outline-focus);
}

.btn--default {
  background-color: var(--cancel-background);
  color: var(--cancel-foreground);
  font-weight: 500;
}
.btn--default:hover {
  background-color: var(--cancel-background-hover);
  color: var(--cancel-foreground-hover);
}
.btn--default:focus-visible {
  outline: 1px auto var(--cancel-outline-focus);
}

.success-message {
  background-color: var(--background);
  border: var(--border);
  border-radius: 12px;
  box-shadow: var(--box-shadow);
  font-weight: 600;
  color: var(--success);
  padding: 12px 24px;
  line-height: 25px;
  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success-icon path {
  fill: var(--success);
}
`,t}function ro(e){return`
  --background: ${e.background};
  --background-hover: ${e.backgroundHover};
  --foreground: ${e.foreground};
  --error: ${e.error};
  --success: ${e.success};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};

  --submit-background: ${e.submitBackground};
  --submit-background-hover: ${e.submitBackgroundHover};
  --submit-border: ${e.submitBorder};
  --submit-outline-focus: ${e.submitOutlineFocus};
  --submit-foreground: ${e.submitForeground};
  --submit-foreground-hover: ${e.submitForegroundHover};

  --cancel-background: ${e.cancelBackground};
  --cancel-background-hover: ${e.cancelBackgroundHover};
  --cancel-border: ${e.cancelBorder};
  --cancel-outline-focus: ${e.cancelOutlineFocus};
  --cancel-foreground: ${e.cancelForeground};
  --cancel-foreground-hover: ${e.cancelForegroundHover};

  --input-background: ${e.inputBackground};
  --input-foreground: ${e.inputForeground};
  --input-border: ${e.inputBorder};
  --input-outline-focus: ${e.inputOutlineFocus};
  `}function q_(e,t,n){const r=e.createElement("style");return r.textContent=`
:host {
  --bottom: 1rem;
  --right: 1rem;
  --top: auto;
  --left: auto;
  --z-index: 100000;
  --font-family: ${n.light.fontFamily};
  --font-size: ${n.light.fontSize};

  position: fixed;
  left: var(--left);
  right: var(--right);
  bottom: var(--bottom);
  top: var(--top);
  z-index: var(--z-index);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${ro(t==="dark"?n.dark:n.light)}
}

${t==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${ro(n.dark)}
  }
}`:""}
}`,r}function G_({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const s=ot.document,i=s.createElement("div");i.id=e;const o=i.attachShadow({mode:"open"});return o.appendChild(q_(s,t,{dark:n,light:r})),o.appendChild(W_(s)),{shadow:o,host:i}}catch{throw p.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Y_(e,t,n){if(!e)return;const r=()=>{e&&e.showError("There was a problem submitting feedback, please wait and try again.")};e.hideError();try{return await j_({...t,source:Pc},n)}catch(s){ht&&p.error(s),r()}}function he(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const lt=20,V_="http://www.w3.org/2000/svg";function K_(){const e=a=>ot.document.createElementNS(V_,a),t=he(e("svg"),{class:"feedback-icon",width:`${lt}`,height:`${lt}`,viewBox:`0 0 ${lt} ${lt}`,fill:"none"}),n=he(e("g"),{clipPath:"url(#clip0_57_80)"}),r=he(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),i=he(e("clipPath"),{id:"clip0_57_80"}),o=he(e("rect"),{width:`${lt}`,height:`${lt}`,fill:"white"});return i.appendChild(o),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(o),{get el(){return t}}}function Y(e,t,...n){const s=ot.document.createElement(e);t&&Object.entries(t).forEach(([i,o])=>{i==="className"&&typeof o=="string"?s.setAttribute("class",o):typeof o=="boolean"&&o?s.setAttribute(i,""):typeof o=="string"?s.setAttribute(i,o):i.startsWith("on")&&typeof o=="function"&&s.addEventListener(i.substring(2).toLowerCase(),o)});for(const i of n)$c(s,i);return s}function $c(e,t){const n=ot.document;if(!(typeof t>"u"||t===null))if(Array.isArray(t))for(const r of t)$c(e,r);else t===!1||(typeof t=="string"?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function X_({buttonLabel:e,onClick:t}){function n(s){t&&t(s)}const r=Y("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},K_().el,e?Y("span",{className:"widget__actor__text"},e):null);return r.addEventListener("click",n),{get el(){return r},show:()=>{r.classList.remove("widget__actor--hidden"),r.setAttribute("aria-hidden","false")},hide:()=>{r.classList.add("widget__actor--hidden"),r.setAttribute("aria-hidden","true")}}}function J_({label:e}){return{el:Y("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}function vr(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function Z_({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:s,messagePlaceholder:i,cancelButtonLabel:o,submitButtonLabel:a,showName:c,showEmail:u,isNameRequired:d,isEmailRequired:l,defaultName:f,defaultEmail:h,onCancel:m,onSubmit:g}){const{el:_}=J_({label:a});function y(S){if(S.preventDefault(),S.target instanceof HTMLFormElement)try{if(g){const k=new FormData(S.target),W={name:vr(k,"name"),email:vr(k,"email"),message:vr(k,"message")};g(W)}}catch{}}const b=Y("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});function I(S){b.textContent=S,b.classList.remove("form__error-container--hidden"),b.setAttribute("aria-hidden","false")}function R(){b.textContent="",b.classList.add("form__error-container--hidden"),b.setAttribute("aria-hidden","true")}const N=Y("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:d,className:"form__input",placeholder:t,value:f}),T=Y("input",{id:"email",type:u?"text":"hidden","aria-hidden":u?"false":"true",name:"email",required:l,className:"form__input",placeholder:r,value:h}),E=Y("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:i}),O=Y("button",{type:"button",className:"btn btn--default","aria-label":o,onClick:S=>{m&&m(S)}},o),H=Y("form",{className:"form",onSubmit:y},[b,c&&Y("label",{htmlFor:"name",className:"form__label"},[Y("span",{className:"form__label__text"},e,d&&Y("span",{className:"form__label__text--required"}," (required)")),N]),!c&&N,u&&Y("label",{htmlFor:"email",className:"form__label"},[Y("span",{className:"form__label__text"},n,l&&Y("span",{className:"form__label__text--required"}," (required)")),T]),!u&&T,Y("label",{htmlFor:"message",className:"form__label"},[Y("span",{className:"form__label__text"},s,Y("span",{className:"form__label__text--required"}," (required)")),E]),Y("div",{className:"btn-group"},[_,O])]);return{get el(){return H},showError:I,hideError:R}}const Q_="http://www.w3.org/2000/svg";function ey({colorScheme:e}){const t=o=>ot.document.createElementNS(Q_,o),n=he(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=he(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const s=t("defs"),i=t("style");return e==="system"&&(i.textContent=`
    @media (prefers-color-scheme: dark) {
      path: {
        fill: '#fff';
      }
    }
    `),i.textContent=`
    path {
      fill: ${e==="dark"?"#fff":"#362d59"};
    }`,s.append(i),n.append(s),{get el(){return n}}}function ty({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:s,isEmailRequired:i,colorScheme:o,defaultName:a,defaultEmail:c,onClosed:u,onCancel:d,onSubmit:l,...f}){let h=null;function m(){g(),u&&u()}function g(){h&&(h.open=!1)}function _(){h&&(h.open=!0)}function y(){return h&&h.open===!0||!1}const{el:b,showError:I,hideError:R}=Z_({showEmail:r,showName:n,isEmailRequired:i,isNameRequired:s,defaultName:a,defaultEmail:c,onSubmit:l,onCancel:d,...f});return h=Y("dialog",{className:"dialog",open:!0,onClick:m},Y("div",{className:"dialog__content",onClick:N=>{N.stopPropagation()}},Y("h2",{className:"dialog__header"},e,t&&Y("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},ey({colorScheme:o}).el)),b)),{get el(){return h},showError:I,hideError:R,open:_,close:g,checkIsOpen:y}}const Tn=16,so=17,ny="http://www.w3.org/2000/svg";function ry(){const e=c=>ot.document.createElementNS(ny,c),t=he(e("svg"),{class:"success-icon",width:`${Tn}`,height:`${so}`,viewBox:`0 0 ${Tn} ${so}`,fill:"none"}),n=he(e("g"),{clipPath:"url(#clip0_57_156)"}),r=he(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=he(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const i=e("defs"),o=he(e("clipPath"),{id:"clip0_57_156"}),a=he(e("rect"),{width:`${Tn}`,height:`${Tn}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(a),{get el(){return t}}}function sy({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=Y("div",{className:"success-message",onClick:n},ry().el,e);return{el:r,remove:n}}function io({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let s,i,o=!1;function a(){if(e)try{const _=sy({message:n.successMessageText,onRemove:()=>{y&&clearTimeout(y),u()}});if(!_.el)throw new Error("Unable to show success message");e.appendChild(_.el);const y=setTimeout(()=>{_&&_.remove()},5e3)}catch(_){p.error(_)}}async function c(_){if(!i)return;const y=[];if(n.isNameRequired&&!_.name&&y.push(n.nameLabel),n.isEmailRequired&&!_.email&&y.push(n.emailLabel),_.message||y.push(n.messageLabel),y.length>0){i.showError(`Please enter in the following required fields: ${y.join(", ")}`);return}if(!await Y_(i,_)){n.onSubmitError&&n.onSubmitError();return}m(),a(),n.onSubmitSuccess&&n.onSubmitSuccess()}function u(){s&&s.show()}function d(){s&&s.hide()}function l(){s&&s.el&&s.el.remove()}function f(){try{if(i){i.open(),o=!0,n.onFormOpen&&n.onFormOpen();return}const _=n.useSentryUser,y=ue(),b=y&&y.getUser();if(i=ty({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,defaultName:_&&b&&b[_.name]||"",defaultEmail:_&&b&&b[_.email]||"",onClosed:()=>{u(),o=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{h(),u()},onSubmit:c}),!i.el)throw new Error("Unable to open Feedback dialog");e.appendChild(i.el),d(),n.onFormOpen&&n.onFormOpen()}catch(_){p.error(_)}}function h(){i&&(i.close(),o=!1,n.onFormClose&&n.onFormClose())}function m(){if(i){h();const _=i.el;_&&_.remove(),i=void 0}}function g(){o||f(),d()}return r?r.addEventListener("click",g):t&&(s=X_({buttonLabel:n.buttonLabel,onClick:g}),s.el&&e.appendChild(s.el)),{get actor(){return s},get dialog(){return i},showActor:u,hideActor:d,removeActor:l,openDialog:f,closeDialog:h,removeDialog:m}}const wn=ot.document;class Us{static __initStatic(){this.id="Feedback"}constructor({id:t="sentry-feedback",showBranding:n=!0,autoInject:r=!0,showEmail:s=!0,showName:i=!0,useSentryUser:o={email:"email",name:"username"},isEmailRequired:a=!1,isNameRequired:c=!1,themeDark:u,themeLight:d,colorScheme:l="system",buttonLabel:f=x_,cancelButtonLabel:h=M_,submitButtonLabel:m=A_,formTitle:g=O_,emailPlaceholder:_=N_,emailLabel:y=D_,messagePlaceholder:b=L_,messageLabel:I=P_,namePlaceholder:R=F_,nameLabel:N=$_,successMessageText:T=B_,onFormClose:E,onFormOpen:O,onSubmitError:H,onSubmitSuccess:S}={}){this.name=Us.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={id:t,showBranding:n,autoInject:r,isEmailRequired:a,isNameRequired:c,showEmail:s,showName:i,useSentryUser:o,colorScheme:l,themeDark:{...to.dark,...u},themeLight:{...to.light,...d},buttonLabel:f,cancelButtonLabel:h,submitButtonLabel:m,formTitle:g,emailLabel:y,emailPlaceholder:_,messageLabel:I,messagePlaceholder:b,nameLabel:N,namePlaceholder:R,successMessageText:T,onFormClose:E,onFormOpen:O,onSubmitError:H,onSubmitSuccess:S}}setupOnce(){if(Or())try{this._cleanupWidgetIfExists();const{autoInject:t}=this.options;if(!t)return;this._createWidget(this.options)}catch(t){ht&&p.error(t)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(t,n){try{const r=no(this.options,n||{});return this._ensureShadowHost(r,({shadow:s})=>{const i=typeof t=="string"?wn.querySelector(t):typeof t.addEventListener=="function"?t:null;if(!i)return ht&&p.error("[Feedback] Unable to attach to target element"),null;const o=io({shadow:s,options:r,attachTo:i});return this._widgets.add(o),this._widget||(this._widget=o),o})}catch(r){return ht&&p.error(r),null}}createWidget(t){try{return this._createWidget(no(this.options,t||{}))}catch(n){return ht&&p.error(n),null}}removeWidget(t){if(!t)return!1;try{if(this._widgets.has(t))return t.removeActor(),t.removeDialog(),this._widgets.delete(t),this._widget===t&&(this._widget=null),!0}catch(n){ht&&p.error(n)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const t=wn.querySelector(`#${this.options.id}`);t&&t.remove()}_createWidget(t){return this._ensureShadowHost(t,({shadow:n})=>{const r=io({shadow:n,options:t});return!this._hasInsertedActorStyles&&r.actor&&(n.appendChild(z_(wn)),this._hasInsertedActorStyles=!0),this._widgets.add(r),this._widget||(this._widget=r),r})}_ensureShadowHost(t,n){let r=!1;if(!this._shadow||!this._host){const{id:i,colorScheme:o,themeLight:a,themeDark:c}=t,{shadow:u,host:d}=G_({id:i,colorScheme:o,themeLight:a,themeDark:c});this._shadow=u,this._host=d,r=!0}this._host.dataset.sentryFeedbackColorscheme=t.colorScheme;const s=n({shadow:this._shadow,host:this._host});return r&&wn.body.appendChild(this._host),s}}Us.__initStatic();function en(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function iy(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=en(n);return s=>r.then(i=>s(i.transaction(t,"readwrite").objectStore(t)))}function Bc(e){return en(e.getAllKeys())}function oy(e,t,n){return e(r=>Bc(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),en(r.transaction)}))}function ay(e){return e(t=>Bc(t).then(n=>{if(n.length!==0)return en(t.get(n[0])).then(r=>(t.delete(n[0]),en(t.transaction).then(()=>r)))}))}function cy(e){let t;function n(){return t==null&&(t=iy(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async r=>{try{const s=await Po(r,e.textEncoder);await oy(n(),s,e.maxQueueSize||30)}catch{}},pop:async()=>{try{const r=await ay(n());if(r)return el(r,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch{}}}}function uy(e){return t=>e({...t,createStore:cy})}function aS(e){return uy(Ed(e))}const oo=1e6,Cn=String(0),ly="main";let Hc="",Uc="",jc="",Qr=w.navigator&&w.navigator.userAgent||"",zc="";const dy=w.navigator&&w.navigator.language||w.navigator&&w.navigator.languages&&w.navigator.languages[0]||"";function fy(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const ao=w.navigator&&w.navigator.userAgentData;fy(ao)&&ao.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(Hc=e.platform||"",jc=e.architecture||"",zc=e.model||"",Uc=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];Qr=`${t.brand} ${t.version}`}}).catch(e=>{});function hy(e){return!("thread_metadata"in e)}function py(e){return hy(e)?_y(e):e}function my(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return typeof t=="string"&&t.length!==32&&L&&p.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function gy(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=my(r),i=py(n),o=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Date.now()),a=typeof r.timestamp=="number"?r.timestamp*1e3:Date.now();return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||rn,runtime:{name:"javascript",version:w.navigator.userAgent},os:{name:Hc,version:Uc,build_number:Qr},device:{locale:dy,model:zc,manufacturer:Qr,architecture:jc,is_emulator:!1},debug_meta:{images:by(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||Q(),trace_id:s,active_thread_id:Cn,relative_start_ns:"0",relative_end_ns:((a-o)*1e6).toFixed(0)}]}}function Wc(e){return e.op==="pageload"}function _y(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Cn]:{name:ly}}};if(!e.samples.length)return r;const s=e.samples[0].timestamp,i=typeof performance.timeOrigin=="number"?performance.timeOrigin:pe||0,o=i-(pe||i);for(let a=0;a<e.samples.length;a++){const c=e.samples[a];if(c.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[a]={elapsed_since_start_ns:((c.timestamp+o-s)*oo).toFixed(0),stack_id:t,thread_id:Cn};continue}let u=e.stacks[c.stackId];const d=[];for(;u;){d.push(u.frameId);const f=e.frames[u.frameId];r.frames[u.frameId]===void 0&&(r.frames[u.frameId]={function:f.name,abs_path:typeof f.resourceId=="number"?e.resources[f.resourceId]:void 0,lineno:f.line,colno:f.column}),u=u.parentId===void 0?void 0:e.stacks[u.parentId]}const l={elapsed_since_start_ns:((c.timestamp+o-s)*oo).toFixed(0),stack_id:n,thread_id:Cn};r.stacks[n]=d,r.samples[a]=l,n++}return r}function yy(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function Sy(e){const t=[];return kt(e,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++){const i=n[s];i&&i.contexts&&i.contexts.profile&&i.contexts.profile.profile_id&&t.push(n[s])}}),t}const co=new WeakMap;function by(e){const t=A._sentryDebugIds;if(!t)return[];const n=F(),r=n&&n.getOptions(),s=r&&r.stackParser;if(!s)return[];let i;const o=co.get(s);o?i=o:(i=new Map,co.set(s,i));const a=Object.keys(t).reduce((u,d)=>{let l;const f=i.get(d);f?l=f:(l=s(d),i.set(d,l));for(let h=l.length-1;h>=0;h--){const m=l[h],g=m&&m.filename;if(m&&g){u[g]=t[d];break}}return u},{}),c=[];for(const u of e)u&&a[u]&&c.push({type:"sourcemap",code_file:u,debug_id:a[u]});return c}function Ey(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(L&&p.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(L&&p.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function vy(e){return e.samples.length<2?(L&&p.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(L&&p.log("[Profiling] Discarding profile because it contains no frames"),!1)}let qc=!1;const Gc=3e4;function Ty(e){return typeof e=="function"}function wy(){const e=w.Profiler;if(!Ty(e)){L&&p.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(Gc/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{L&&(p.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),p.log("[Profiling] Disabling profiling for current user session.")),qc=!0}}function es(e){if(qc)return L&&p.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return L&&p.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=F(),n=t&&t.getOptions();if(!n)return L&&p.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return Ey(r)?r?(r===!0?!0:Math.random()<r)?!0:(L&&p.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(L&&p.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(L&&p.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function ky(e,t,n,r){return vy(n)?gy(e,t,n,r):null}const Je=new Map;function Iy(){return Je.size}function Ry(e){const t=Je.get(e);return t&&Je.delete(e),t}function Cy(e,t){if(Je.set(e,t),Je.size>30){const n=Je.keys().next().value;Je.delete(n)}}function cS(e){return e?es(e)?ts(e):e:(L&&p.log("[Profiling] Transaction is undefined, skipping profiling"),e)}function ts(e){let t;Wc(e)&&(t=st()*1e3);const n=wy();if(!n)return e;L&&p.log(`[Profiling] started profiling transaction: ${ce(e).description}`);const r=Q();async function s(){return!e||!n?null:n.stop().then(c=>(i&&(w.clearTimeout(i),i=void 0),L&&p.log(`[Profiling] stopped profiling of transaction: ${ce(e).description}`),c?(Cy(r,c),null):(L&&p.log(`[Profiling] profiler returned null profile for: ${ce(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null))).catch(c=>(L&&p.log("[Profiling] error while stopping profiler:",c),null))}let i=w.setTimeout(()=>{L&&p.log("[Profiling] max profile duration elapsed, stopping profiling for:",ce(e).description),s()},Gc);const o=e.end.bind(e);function a(){return e?(s().then(()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),o()},()=>{o()}),e):o()}return e.end=a,e}const Yc="BrowserProfiling",xy=()=>({name:Yc,setup(e){const n=ue().getTransaction();if(n&&Wc(n)&&es(n)&&ts(n),typeof e.on!="function"){p.warn("[Profiling] Client does not support hooks, profiling will be disabled");return}e.on("startTransaction",r=>{es(r)&&ts(r)}),e.on("beforeEnvelope",r=>{if(!Iy())return;const s=Sy(r);if(!s.length)return;const i=[];for(const o of s){const a=o&&o.contexts,c=a&&a.profile&&a.profile.profile_id,u=a&&a.profile&&a.profile.start_timestamp;if(typeof c!="string"){L&&p.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!c){L&&p.log("[Profiling] cannot find profile for a transaction without a profile context");continue}a&&a.profile&&delete a.profile;const d=Ry(c);if(!d){L&&p.log(`[Profiling] Could not retrieve profile for transaction: ${c}`);continue}const l=ky(c,u,d,o);l&&i.push(l)}yy(r,i)})}}),uS=ge(Yc,xy);let Vc={};w.Sentry&&w.Sentry.Integrations&&(Vc=w.Sentry.Integrations);const lS={...Vc,...Hd,...yh};export{Aa as Breadcrumbs,mf as BrowserClient,uS as BrowserProfilingIntegration,oS as BrowserTracing,Fa as Dedupe,Us as Feedback,pa as FunctionToString,ka as GlobalHandlers,La as HttpContext,Ko as Hub,ga as InboundFilters,lS as Integrations,Na as LinkedErrors,Xy as ModuleMetadata,Hs as Replay,Fr as SDK_VERSION,xe as Scope,xa as TryCatch,w as WINDOW,We as addBreadcrumb,dd as addEventProcessor,ul as addGlobalEventProcessor,Vy as addIntegration,jl as addTracingExtensions,Wo as captureEvent,gs as captureException,My as captureMessage,iS as captureUserFeedback,xf as chromeStackLineParser,By as close,Ay as configureScope,Gy as continueTrace,da as createTransport,hf as createUserFeedbackEnvelope,gh as defaultIntegrations,zr as defaultRequestInstrumentationOptions,Uf as defaultStackLineParsers,jf as defaultStackParser,uf as eventFromException,lf as eventFromMessage,va as exceptionFromError,Uy as extractTraceparentData,$y as flush,nS as forceLoad,Nf as geckoStackLineParser,Ss as getActiveSpan,Lt as getActiveTransaction,F as getClient,B as getCurrentHub,ue as getCurrentScope,$r as getHubFromCarrier,eS as init,Kh as instrumentOutgoingRequests,Hy as lastEventId,aS as makeBrowserOfflineTransport,yf as makeFetchTransport,fi as makeMain,Ky as makeMultiplexedTransport,bf as makeXHRTransport,Jy as metrics,rS as onLoad,cS as onProfilingStartRouteTransaction,Zy as opera10StackLineParser,Qy as opera11StackLineParser,Tl as setContext,Ny as setExtra,Oy as setExtras,Yy as setMeasurement,Ly as setTag,Dy as setTags,Py as setUser,tS as showReportDialog,Ll as spanStatusfromHttpCode,qy as startInactiveSpan,zy as startSpan,Wy as startSpanManual,Fy as startTransaction,jy as trace,Pf as winjsStackLineParser,Yn as withScope,sS as wrap};
